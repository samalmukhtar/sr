<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠØ© Ù…Ø¹ Ø§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ</title>
<style>
:root{
  --bg:#0b0f12; --panel:#071018; --muted:#9aa4ad; --accent:#e74c3c;
  --cell-size:80px; /* default - can be changed by slider */
}
*{box-sizing:border-box}
body{
  margin:0; min-height:100vh; background:var(--bg); color:#fff;
  font-family: "Noto Naskh Arabic", "Segoe UI", Tahoma, Arial, sans-serif;
  display:flex; flex-direction:column; gap:12px; align-items:center; padding:16px;
  overflow-x: hidden;
}
a{color:#58a6ff; text-decoration:none}
a:hover{text-decoration:underline}

.header{
  width:100%; max-width:1200px; display:flex; gap:12px; align-items:center; justify-content:space-between;
}
.title{font-size:20px; font-weight:800}
.controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
input[type="text"], textarea, input[type="date"], select{
  background:#071018; border:1px solid #122028; color:#fff; padding:8px; border-radius:8px; direction:rtl;
}
textarea{width:520px; min-height:80px; resize:vertical}
.btn{padding:8px 12px; border-radius:8px; border:none; cursor:pointer; font-weight:700}
.btn-main{background:var(--accent); color:#fff}
.btn-ghost{background:transparent; border:1px solid #233; color:var(--muted)}
.btn-spectrum{background:linear-gradient(90deg,#e74c3c,#f39c12,#f1c40f,#2ecc71,#1abc9c,#3498db,#9b59b6); color:#000}

.wrapper{width:100%; max-width:1200px; display:flex; gap:16px; align-items:flex-start; justify-content:center; flex-wrap:wrap}
.board-wrap{display:flex; flex-direction:column; gap:10px; align-items:center; overflow:visible; padding:20px}
.grid{
  display:grid;
  grid-template-columns: repeat(8, var(--cell-size));
  grid-template-rows: repeat(8, var(--cell-size));
  gap:6px;
  background:transparent;
  padding:6px;
  border-radius:12px;
  transition: transform 0.1s ease, scale 0.1s ease;
  transform-origin: top left;
  position: relative;
}
.cell{
  position:relative;
  display:flex; align-items:center; justify-content:center; text-align:center; padding:6px;
  border-radius:8px; overflow:hidden; transition:transform .14s ease, box-shadow .14s;
  font-weight:700; color:#fff; min-width:var(--cell-size); min-height:var(--cell-size);
  user-select:none;
  cursor: pointer;
}
.cell.hidden .word{opacity:0.06; color:transparent}
.cell.visible .word{opacity:1; color:inherit; transform:translateY(0)}
.cell .meta-num{
  position:absolute; top:6px; left:6px; font-size:11px; color:#eee; opacity:0.95; text-align:left;
  line-height:1;
}
.cell .meta-letter{
  position:absolute; top:22px; left:6px; font-size:12px; color:#eee; opacity:0.95;
}
.cell .meta-tower{
  position:absolute; top:6px; right:6px; font-size:11px; color:#eee; opacity:0.95;
}
.cell .word{
  font-size:18px; padding:2px 4px; transition:all .12s;
  display:block;
  direction:rtl;
  z-index:2;
}
.cell .gematria{
  position:absolute; bottom:6px; left:6px; right:6px; font-size:12px; color:rgba(255,255,255,0.9);
  z-index:2;
}

/* Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¯Ø§Ø®Ù„ ÙƒÙ„ Ù…Ø±Ø¨Ø¹ */
.extras{
  position:absolute; bottom:10px; right:6px; left:6px; font-size:10px; line-height:1.2; z-index:2;
  color:#f5f7f9; text-align:right;
}
.extras .part{opacity:0.92}
.extras .asm{font-weight:800}
.extras .day{opacity:0.9}
.extras .kh{opacity:0.85}

/* color classes */
.c-red{background:#e74c3c;color:#fff;border:3px solid #c43b31}
.c-black{background:#0b0b0b;color:#fff;border:2px solid #111}
.c-white{background:#ffffff;color:#000;border:2px solid #ddd}
.spec-0{background:#FF1744;color:#fff}
.spec-1{background:#FF9100;color:#000}
.spec-2{background:#FFD600;color:#000}
.spec-3{background:#00C853;color:#fff}
.spec-4{background:#00B0FF;color:#000}
.spec-5{background:#651FFF;color:#fff}
.spec-6{background:#D500F9;color:#fff}

/* Zodiac sign colors */
.zodiac-fire{color:#FFD700}      /* Yellow for fire signs */
.zodiac-earth{color:#FFFFFF}     /* White for earth signs */
.zodiac-air{color:#000000}       /* Black for air signs */
.zodiac-water{color:#1E90FF}     /* Blue for water signs */

.small-note{font-size:11px; color:var(--muted)}
.sidepanel{width:360px; max-width:38vw; display:flex; flex-direction:column; gap:10px}
.status{padding:10px; background:#081018; border-radius:8px; color:var(--muted)}
.slider-row{display:flex; gap:8px; align-items:center}
.footer{font-size:13px; color:var(--muted); text-align:center; margin-top:6px}

/* Row numbers on the right */
.row-numbers {
  position: absolute;
  right: 0;
  top: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 6px;
  pointer-events: none;
  user-select: none;
  z-index: 10;
}
.row-numbers div {
  font-size: 12px;
  color: #eee;
  opacity: 0.95;
  min-width: 20px;
  text-align: center;
}

/* Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠØ© Ø§Ù„Ù€ 28 - Ù†Ø§ÙØ°Ø© */
.house-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  transition: all 0.3s ease;
}

.house-container {
  background: #0b0f12;
  border-radius: 16px;
  padding: 30px;
  width: 90%;
  max-width: 900px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 0 30px rgba(231, 76, 60, 0.5);
  border: 2px solid #e74c3c;
  position: relative;
}

.house-header {
  text-align: center;
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 2px solid #2c3e50;
}

.house-header h2 {
  font-size: 28px;
  margin: 0;
  color: #e74c3c;
}

.house-header .house-number {
  font-size: 60px;
  font-weight: bold;
  color: #e74c3c;
  margin: 10px 0;
  line-height: 1;
}

.house-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.house-info {
  background: #071018;
  border-radius: 12px;
  padding: 20px;
}

.house-info h3 {
  color: #f39c12;
  margin-top: 0;
  border-bottom: 1px solid #34495e;
  padding-bottom: 10px;
}

.info-item {
  margin-bottom: 12px;
}

.info-item strong {
  color: #3498db;
  display: block;
  margin-bottom: 6px;
}

.info-item p {
  margin: 0;
  color: #ecf0f1;
  line-height: 1.6;
}

.close-modal {
  position: absolute;
  top: 20px;
  right: 20px;
  background: #e74c3c;
  color: white;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1001;
}

/* Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù‚Ù…Ø±ÙŠ ÙˆØ§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
.panel-card{
  background:#081018; border:1px solid #122028; border-radius:12px; padding:12px;
}
.table-container {
  margin-top: 8px;
  width: 100%;
  overflow-x: auto;
}
table {
  width: 100%;
  border-collapse: collapse;
  display: none;
  background:#0f1722;
  border-radius:8px;
  overflow:hidden;
}
table.active { display: table; }
th, td {
  padding: 10px;
  border: 1px solid #1b2834;
  text-align: center;
  font-size:12px;
  color:#e7eef5;
}
th { background-color: #11202c; color:#cfe4ff }
.ref-note{font-size:12px; color:#9fb3c8; margin-top:8px}

@media(max-width:1000px){
  .sidepanel{width:100%}
  textarea{width:100%}
  .house-content { grid-template-columns: 1fr; }
}

@media(max-width:768px){
  .house-header .house-number { font-size: 50px; }
  .house-header h2 { font-size: 22px; }
}
</style>
</head>
<body>

<div class="header">
  <div>
    <div class="title">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠØ© Ù…Ø¹ Ø§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ</div>
    <div class="small-note">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹Ø§Øª: Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ø³ÙÙ„ØŒ ÙˆÙÙŠ ÙƒÙ„ ØµÙ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„Ø´Ù…Ø§Ù„</div>
    <div class="small-note">Ø§Ø¶ØºØ· Ù…Ø±ØªÙŠÙ† Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø±Ø¨Ø¹ Ù„Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø²Ù„Ø© Ø§Ù„Ù‚Ù…Ø±ÙŠØ© ÙˆØ§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ</div>
  </div>

  <div class="controls">
    <button class="btn btn-main" id="btnLoad">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Øµ</button>
    <button class="btn btn-ghost" id="btnReset">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
    <button class="btn" id="btnRandom">ØªÙ„ÙˆÙŠÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠ</button>
    <button class="btn btn-spectrum" id="btnSpectrum">Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø·ÙŠÙ</button>
    <button class="btn" id="btnPrev">Ø§Ù„Ø±Ø¬ÙˆØ¹</button>
    <button class="btn btn-main" id="btnNext">Ø§Ù„ØªØ§Ù„ÙŠ</button>
    <button class="btn" id="btnSubmit" style="background:#2ecc71">Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</button>
  </div>
</div>

<div class="wrapper">
  <div class="board-wrap">
    <div style="display:flex; gap:10px; align-items:center;">
      <div class="slider-row">
        <label class="small-note">Ø­Ø¬Ù… Ø§Ù„Ø®Ø§Ù†Ø©:</label>
        <input type="range" id="sizeRange" min="40" max="2500" value="80" />
        <span id="sizeValue" class="small-note">80px</span>
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        <label class="small-note">ÙˆØ¶Ø¹ Ø§Ù„ÙƒØ´Ù:</label>
        <select id="mode">
          <option value="hover">ÙƒØ´Ù Ø¨Ø§Ù„Ø­Ø±ÙƒØ©</option>
          <option value="click">ÙƒØ´Ù Ø¨Ø§Ù„Ù†Ù‚Ø±</option>
          <option value="manual">ÙŠØ¯ÙˆÙŠ (Ø§Ù„ØªØ§Ù„ÙŠ/Ø§Ù„Ø±Ø¬ÙˆØ¹)</option>
        </select>
      </div>
    </div>

    <div class="grid" id="grid" aria-label="Ù„ÙˆØ­Ø© 8Ã—8"></div>
    <div class="row-numbers" id="rowNumbers"></div>

    <div style="display:flex; gap:10px; align-items:center; margin-top:6px;">
      <div class="small-note">Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ø§Ù„ÙØ£Ø±Ø© Ø£Ùˆ Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ø³ØªÙØ¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø¨Ø§Ù„ØªØªØ§Ø¨Ø¹</div>
    </div>
  </div>

  <div class="sidepanel">
    <label class="small-note">Ø£Ø¯Ø®Ù„ Ø§Ù„Ù†Øµ (ÙƒÙ„ ÙƒÙ„Ù…Ø© Ù…ÙØµÙˆÙ„Ø© Ø¨Ù…Ø³Ø§ÙØ© Ø£Ùˆ Ø³Ø·Ø±):</label>
    <textarea id="textInput" placeholder="Ø£Ù„ØµÙ‚ Ù†ØµÙ‘Ùƒ Ù‡Ù†Ø§..."></textarea>

    <div style="display:flex; gap:8px;">
      <button class="btn btn-main" id="btnLoadFromInput">ØªØ­Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„Ø­Ù‚Ù„</button>
      <button class="btn btn-ghost" id="btnFillDemo">Ù…Ù„Ø£ ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
    </div>

    <div class="status">
      <div>Ù…ÙÙƒØ´ÙˆÙ: <span id="revealedCount">0</span> / 64</div>
      <div style="margin-top:6px">Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span id="currentWord">â€”</span></div>
      <div style="margin-top:6px" class="small-note">Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© ØªØ­Øª Ø§Ù„Ø±Ù‚Ù…: Ø§Ù„Ø£Ù„Ù â†’ Ø§Ù„Ø¨Ø§Ø¡ â†’ Ø§Ù„ØªØ§Ø¡ ... Ø«Ù… ØªØ¹Ø§Ø¯ ÙƒÙ„ 28 Ø­Ø±ÙØ§Ù‹</div>
      <div style="margin-top:6px" class="small-note">Ø§Ù„Ø¨Ø±Ø¬: Ø±Ù‚Ù… Ù…Ù† 1 Ø¥Ù„Ù‰ 12 ÙŠÙØ¹Ø§Ø¯ Ù…Ù† Ø¬Ø¯ÙŠØ¯ Ø¨Ø¹Ø¯ 12</div>
      <div style="margin-top:6px" class="small-note">Ø§Ø¶ØºØ· Ù…Ø±ØªÙŠÙ† Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø±Ø¨Ø¹ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠ ÙˆØ§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ</div>
    </div>

    <div class="panel-card">
      <div style="font-weight:700; margin-bottom:6px">ğŸŒ™ Ù…ÙˆÙ„Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</div>
      <div class="small-note" style="margin-bottom:6px">Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ® Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù†Ø²Ù„Ø© Ø§Ù„Ù‚Ù…Ø±ÙŠØ© (Ø§Ù„Ø¯ÙˆØ±Ø© Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ 28 ÙŠÙˆÙ…Ø§Ù‹ Ø§Ø¹ØªØ¨Ø§Ø±Ø§Ù‹ Ù…Ù† 2024-04-07)</div>
      <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap">
        <input type="date" id="dateInput" value="2024-04-07">
        <button class="btn" id="btnAnalyze" style="background:#00b894">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù†Ø²Ù„Ø©</button>
        <button class="btn btn-ghost" id="btnToggleTables">ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„</button>
      </div>
      <div id="output" class="small-note" style="margin-top:10px"></div>

      <div class="table-container">
        <table id="mainTable" class="active">
          <thead>
            <tr>
              <th>Ø§Ù„ÙŠÙˆÙ…</th>
              <th>Ø§Ù„Ù…Ù†Ø²Ù„Ø©</th>
              <th>Ø§Ù„Ø­Ø±Ù</th>
              <th>Ø§Ù„Ø²Ø§ÙˆÙŠØ©</th>
              <th>Ø§Ù„Ø¯Ù„Ø§Ù„Ø©</th>
            </tr>
          </thead>
          <tbody id="mansionBody"></tbody>
        </table>

        <table id="abumasharTable">
          <thead>
            <tr>
              <th>Ø§Ù„Ù…Ù†Ø²Ù„Ø©</th>
              <th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th>
              <th>Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø³Ø±ÙŠ</th>
              <th>Ø§Ù„Ø®Ø§ØµÙŠØ© Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ©</th>
            </tr>
          </thead>
          <tbody id="abumasharBody"></tbody>
        </table>
      </div>

      <div class="ref-note">
        Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙƒØ«Ø± ØªÙØµÙŠÙ„Ø§Ù‹ØŒ Ù‚Ù… Ø¨Ø²ÙŠØ§Ø±Ø©:
        <a href="https://kharta.website/%D8%A7%D9%84%D8%AE%D8%A7%D8%B1%D8%B7%D8%A9-%D8%A7%D9%84%D9%81%D9%84%D9%83%D9%8A%D8%A9/" target="_blank" rel="noopener">Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„ÙÙ„ÙƒÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</a>
      </div>
    </div>

    <div style="background:#071018; padding:8px; border-radius:8px; margin-top:8px;">
      <div style="font-weight:700; margin-bottom:6px">Ù‚Ø§Ø¦Ù…Ø© Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø·ÙŠÙ (Ù…Ø¹ Ø§Ù„Ø³Ø±/Ø§Ù„Ø­ÙƒÙ…Ø©)</div>
      <div id="rainbowLegend" class="small-note"></div>
    </div>
  </div>
</div>

<div class="footer">ÙŠÙ…ÙƒÙ†Ùƒ ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù„ÙˆØ­Ø© Ø­ØªÙ‰ 2500px. Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµØºÙŠØ±Ø© (Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¨Ø¹ØŒ Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØŒ Ø§Ù„Ø¨Ø±Ø¬) Ø«Ø§Ø¨ØªØ© ÙÙŠ ÙƒÙ„ Ù…Ø±Ø¨Ø¹. ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­Ø³Ù†Ù‰ ÙˆØ¯ÙˆØ±Ø© Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ (1â†’7) ÙˆØªÙƒØ§Ù…Ù„ Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠØ© ÙˆØ§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ.</div>

<!-- Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠØ© Ø§Ù„Ù€ 28 -->
<div id="houseModal" class="house-modal" style="display: none;">
  <div class="house-container">
    <div class="house-header">
      <h2 id="modalHouseName">Ø§Ù„Ù…Ù†Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠ</h2>
      <div class="house-number" id="modalHouseNumber">1</div>
    </div>
    
    <div class="house-content">
      <div class="house-info">
        <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„</h3>
        <div class="info-item">
          <strong>Ø§Ù„Ø­Ø±Ù Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠ</strong>
          <p id="modalHouseLetter">Ø£</p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø¨Ø±Ø¬ Ø§Ù„ÙÙ„ÙƒÙŠ</strong>
          <p id="modalHouseZodiac">Ø§Ù„Ø­Ù…Ù„ (1) - Ù†Ø§Ø±ÙŠ</p>
        </div>
        <div class="info-item">
          <strong>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬Ù…Ù„</strong>
          <p id="modalHouseGematria">1</p>
        </div>
        <div class="info-item">
          <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª</strong>
          <p id="modalHouseCycle">1</p>
        </div>
        <div class="info-item">
          <strong>Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø²Ù„Ø© (Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…)</strong>
          <p id="modalMansionName">Ø§Ù„Ø´Ø±Ø·Ø§Ù†</p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø­Ø±Ù Ø§Ù„ÙƒÙˆÙ†ÙŠ</strong>
          <p id="modalMansionLetter">Ø£</p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ù…Ø±ÙŠØ©</strong>
          <p id="modalMansionAngle">0Â°</p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø¯Ù„Ø§Ù„Ø©</strong>
          <p id="modalMansionMeaning">Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</p>
        </div>
      </div>
      
      <div class="house-info">
        <h3>Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù…Ù†Ø²Ù„</h3>
        <div class="info-item">
          <strong>Ø§Ù„Ø·Ø§Ù‚Ø©</strong>
          <p id="modalHouseEnergy">Ø¹Ø§Ù„ÙŠØ©ØŒ Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø·Ø§Ù‚Ø© Ù…ØªØ¬Ø¯Ø¯Ø©</p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„ØªØ£Ø«ÙŠØ±</strong>
          <p id="modalHouseInfluence">ÙŠÙ…Ù†Ø­ Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ø¹Ø²ÙŠÙ…Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹</p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„ÙÙˆØ§Ø¦Ø¯</strong>
          <p id="modalHouseBenefits">Ø§Ù„ØªØ®Ø·ÙŠØ·ØŒ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©</p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª</strong>
          <p id="modalHouseChallenges">Ø§Ù„Ø§Ù†Ø¯ÙØ§Ø¹ Ø§Ù„Ø²Ø§Ø¦Ø¯ØŒ Ù‚Ù„Ø© Ø§Ù„ØµØ¨Ø±</p>
        </div>
      </div>
      
      <div class="house-info" style="grid-column: span 2;">
        <h3>Ø§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ</h3>
        <div class="info-item">
          <strong>Ø­Ø±Ù Ø§Ù„Ø­Ø±Ø¨</strong>
          <p id="modalSealWar"></p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø·Ù„Ø³Ù…</strong>
          <p id="modalSealTalisman"></p>
        </div>
        <div class="info-item">
          <strong>Ù‚ÙˆØ© Ø§Ù„Ø­Ø±Ù</strong>
          <p id="modalSealLetterPower"></p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</strong>
          <p id="modalSealArabicNames"></p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³Ø±ÙŠØ§Ù†ÙŠØ©</strong>
          <p id="modalSealSyriacNames"></p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø£ÙŠØ§Ù…</strong>
          <p id="modalSealDays"></p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø¯Ø±Ø§Ø±ÙŠ (Ø§Ù„Ù†Ø¬ÙˆÙ…)</strong>
          <p id="modalSealStars"></p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„ØªÙ„Ø§ØµÙ…</strong>
          <p id="modalSealAdhesives"></p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ø£Ø¹ÙˆØ§Ù† Ø§Ù„Ø£Ø±Ø¶ÙŠØ©</strong>
          <p id="modalSealEarthlyHelpers"></p>
        </div>
        <div class="info-item">
          <strong>Ø§Ù„Ù…Ù„ÙˆÙƒ Ø§Ù„Ø¹Ù„ÙˆÙŠØ©</strong>
          <p id="modalSealHeavenlyKings"></p>
        </div>
      </div>
    </div>
  </div>
  
  <button class="close-modal" id="closeHouseModal">&times;</button>
</div>

<script>
/* ---------- Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ© ---------- */
// Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (28 Ø­Ø±ÙØ§Ù‹) Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù„Ø£Ø¬Ù„ Ø§Ù„ØªØ¯ÙˆÙŠØ±
const arabicLetters = ["Ø£","Ø¨","Øª","Ø«","Ø¬","Ø­","Ø®","Ø¯","Ø°","Ø±","Ø²","Ø³","Ø´","Øµ","Ø¶","Ø·","Ø¸","Ø¹","Øº","Ù","Ù‚","Ùƒ","Ù„","Ù…","Ù†","Ù‡Ù€","Ùˆ","ÙŠ"];

// Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¬ÙÙ…Ù‘Ù„ Ø§Ù„ÙƒØ¨ÙŠØ± (Ø£Ø¨Ø¬Ø¯) - Ø®Ø±ÙŠØ·Ø© Ù„Ù„Ø£Ø­Ø±Ù Ø¥Ù„Ù‰ Ù‚ÙŠÙ…Ù‡Ø§
const abjadMap = {
  "Ø§":1,"Ø£":1,"Ø¥":1,"Ø¢":1,"Ø¨":2,"Ø¬":3,"Ø¯":4,"Ù‡":5,"Ø©":5,"Ùˆ":6,"Ø²":7,"Ø­":8,"Ø·":9,
  "ÙŠ":10,"Ù‰":10,"Ùƒ":20,"Ù„":30,"Ù…":40,"Ù†":50,"Ø³":60,"Ø¹":70,"Ù":80,"Øµ":90,"Ù‚":100,
  "Ø±":200,"Ø´":300,"Øª":400,"Ø«":500,"Ø®":600,"Ø°":700,"Ø¶":800,"Ø¸":900,"Øº":1000
};

// Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø·ÙŠÙ ÙˆØ§Ù„Ø³Ø±/Ø§Ù„Ø­ÙƒÙ…Ø©
const rainbow = [
  {cls:'spec-0', color:'#FF1744', name:'Ø£Ø­Ù…Ø±', meaning:'Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ø­Ù…Ø§Ø³'},
  {cls:'spec-1', color:'#FF9100', name:'Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ', meaning:'Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„Ø·Ø§Ù‚Ø©'},
  {cls:'spec-2', color:'#FFD600', name:'Ø£ØµÙØ±', meaning:'Ø§Ù„Ù†ÙˆØ± ÙˆØ§Ù„Ù…Ø¹Ø±ÙØ©'},
  {cls:'spec-3', color:'#00C853', name:'Ø£Ø®Ø¶Ø±', meaning:'Ø§Ù„Ø³Ù„Ø§Ù… ÙˆØ§Ù„Ù†Ù…Ùˆ'},
  {cls:'spec-4', color:'#00B0FF', name:'Ø£Ø²Ø±Ù‚', meaning:'Ø§Ù„Ù‡Ø¯ÙˆØ¡ ÙˆØ§Ù„Ø­ÙƒÙ…Ø©'},
  {cls:'spec-5', color:'#651FFF', name:'Ù†ÙŠÙ„ÙŠ', meaning:'Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ© ÙˆØ§Ù„ØªØ£Ù…Ù„'},
  {cls:'spec-6', color:'#D500F9', name:'Ø¨Ù†ÙØ³Ø¬ÙŠ', meaning:'Ø§Ù„ØµÙØ§Ø¡ ÙˆØ§Ù„Ø¥Ù„Ù‡Ø§Ù…'}
];

// Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø¨Ø±Ø§Ø¬ ÙˆØ¹Ù†Ø§ØµØ±Ù‡Ø§
const zodiacSigns = [
  {name: "Ø§Ù„Ø­Ù…Ù„", element: "Ù†Ø§Ø±ÙŠ"},
  {name: "Ø§Ù„Ø«ÙˆØ±", element: "ØªØ±Ø§Ø¨ÙŠ"},
  {name: "Ø§Ù„Ø¬ÙˆØ²Ø§Ø¡", element: "Ù‡ÙˆØ§Ø¦ÙŠ"},
  {name: "Ø§Ù„Ø³Ø±Ø·Ø§Ù†", element: "Ù…Ø§Ø¦ÙŠ"},
  {name: "Ø§Ù„Ø£Ø³Ø¯", element: "Ù†Ø§Ø±ÙŠ"},
  {name: "Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡", element: "ØªØ±Ø§Ø¨ÙŠ"},
  {name: "Ø§Ù„Ù…ÙŠØ²Ø§Ù†", element: "Ù‡ÙˆØ§Ø¦ÙŠ"},
  {name: "Ø§Ù„Ø¹Ù‚Ø±Ø¨", element: "Ù…Ø§Ø¦ÙŠ"},
  {name: "Ø§Ù„Ù‚ÙˆØ³", element: "Ù†Ø§Ø±ÙŠ"},
  {name: "Ø§Ù„Ø¬Ø¯ÙŠ", element: "ØªØ±Ø§Ø¨ÙŠ"},
  {name: "Ø§Ù„Ø¯Ù„Ùˆ", element: "Ù‡ÙˆØ§Ø¦ÙŠ"},
  {name: "Ø§Ù„Ø­ÙˆØª", element: "Ù…Ø§Ø¦ÙŠ"}
];

// Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø­Ø³Ø¨ Ø§Ù„Ø¹Ù†ØµØ±
const elementColors = {
  "Ù†Ø§Ø±ÙŠ": "zodiac-fire",
  "ØªØ±Ø§Ø¨ÙŠ": "zodiac-earth",
  "Ù‡ÙˆØ§Ø¦ÙŠ": "zodiac-air",
  "Ù…Ø§Ø¦ÙŠ": "zodiac-water"
};

// Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ù€ 28 (Ø®ØµØ§Ø¦Øµ Ø¹Ø§Ù…Ø© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)
const housesInfo = [
  {name: "Ø¨ÙŠØª Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ù†ÙˆØ±", energy: "Ø¹Ø§Ù„ÙŠØ©ØŒ Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø·Ø§Ù‚Ø© Ù…ØªØ¬Ø¯Ø¯Ø©", influence: "ÙŠÙ…Ù†Ø­ Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ø¹Ø²ÙŠÙ…Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹", benefits: "Ø§Ù„ØªØ®Ø·ÙŠØ·ØŒ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©", challenges: "Ø§Ù„Ø§Ù†Ø¯ÙØ§Ø¹ Ø§Ù„Ø²Ø§Ø¦Ø¯ØŒ Ù‚Ù„Ø© Ø§Ù„ØµØ¨Ø±"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø­ÙƒÙ…Ø© ÙˆØ§Ù„ØªÙˆØ§Ø²Ù†", energy: "Ù…ØªÙˆØ§Ø²Ù†Ø©ØŒ Ù‡Ø§Ø¯Ø¦Ø©ØŒ ØªØ£Ù…Ù„ÙŠØ©", influence: "ÙŠØ²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø­ÙƒÙ…Ø© ÙˆØ§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ", benefits: "Ø§Ù„ØªØ¹Ù„Ù…ØŒ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØŒ Ø§Ù„Ø­ÙƒÙ…Ø©", challenges: "Ø§Ù„Ù…Ù…Ø§Ø·Ù„Ø©ØŒ Ø§Ù„Ø¥ÙØ±Ø§Ø· ÙÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„"},
  {name: "Ø¨ÙŠØª Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„Ø¥Ø¨Ø¯Ø§Ø¹", energy: "Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©ØŒ ØªÙˆØ§ØµÙ„ÙŠØ©ØŒ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„ØªØ¹Ø¨ÙŠØ±", benefits: "Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ØŒ Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŒ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª", challenges: "Ø§Ù„ØªØ´ØªØªØŒ ÙƒØ«Ø±Ø© Ø§Ù„ÙƒÙ„Ø§Ù…"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø± ÙˆØ§Ù„Ø£Ù…Ø§Ù†", energy: "Ø«Ø§Ø¨ØªØ©ØŒ Ù…Ø±ÙŠØ­Ø©ØŒ Ø¢Ù…Ù†Ø©", influence: "ÙŠÙˆÙØ± Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø± ÙˆØ§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù†ÙØ³ÙŠ", benefits: "Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø±ØŒ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£Ø³Ø±Ø©ØŒ Ø§Ù„Ø£Ù…Ø§Ù†", challenges: "Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„ØªØºÙŠÙŠØ±ØŒ Ø§Ù„Ø¬Ù…ÙˆØ¯"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© ÙˆØ§Ù„ØªØºÙŠÙŠØ±", energy: "Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ©ØŒ Ù…ØºØ§Ù…Ø±Ø©ØŒ ØªØºÙŠÙŠØ±", influence: "ÙŠØ´Ø¬Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØºØ§Ù…Ø±Ø© ÙˆØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯", benefits: "Ø§Ù„ØªØºÙŠÙŠØ±ØŒ Ø§Ù„Ø³ÙØ±ØŒ Ø§Ù„Ø§ÙƒØªØ´Ø§Ù", challenges: "Ø§Ù„ØªÙ‡ÙˆØ±ØŒ Ø¹Ø¯Ù… Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø±"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·", energy: "Ù…Ù†Ø¸Ù…Ø©ØŒ Ø¹Ù…Ù„ÙŠØ©ØŒ Ù…Ù†Ø¶Ø¨Ø·Ø©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©", benefits: "Ø§Ù„Ø¹Ù…Ù„ØŒ Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²", challenges: "Ø§Ù„Ø¥Ø±Ù‡Ø§Ù‚ØŒ Ø§Ù„Ø¬Ù…ÙˆØ¯ ÙÙŠ Ø§Ù„Ø±ÙˆØªÙŠÙ†"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø´Ø±Ø§ÙƒØ§Øª", energy: "Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©ØŒ ØªØ¹Ø§ÙˆÙ†ÙŠØ©ØŒ ØªÙˆØ§ÙÙ‚ÙŠØ©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª ÙˆØ§Ù„Ø´Ø±Ø§ÙƒØ§Øª Ø§Ù„Ù†Ø§Ø¬Ø­Ø©", benefits: "Ø§Ù„Ø²ÙˆØ§Ø¬ØŒ Ø§Ù„Ø´Ø±Ø§ÙƒØ©ØŒ Ø§Ù„ØµØ¯Ø§Ù‚Ø©", challenges: "Ø§Ù„ØªØ¨Ø¹ÙŠØ©ØŒ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù‡ÙˆÙŠØ©"},
  {name: "Ø¨ÙŠØª Ø§Ù„ØªØ­ÙˆÙ„ ÙˆØ§Ù„Ø¹Ù…Ù‚", energy: "ÙƒØ«ÙŠÙØ©ØŒ ØªØ­ÙˆÙ„ÙŠØ©ØŒ Ø¹Ù…ÙŠÙ‚Ø©", influence: "ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙ„ Ø§Ù„Ø´Ø®ØµÙŠ ÙˆØ§Ù„Ù†Ù…Ùˆ", benefits: "Ø§Ù„ØªØ­ÙˆÙ„ØŒ Ø§Ù„Ø´ÙØ§Ø¡ØŒ Ø§Ù„Ø¹Ù…Ù‚ Ø§Ù„Ù†ÙØ³ÙŠ", challenges: "Ø§Ù„ØµØ¯Ù…Ø§ØªØŒ Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„ØªØºÙŠÙŠØ±"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø­ÙƒÙ…Ø© ÙˆØ§Ù„ØªÙˆØ³Ø¹", energy: "Ù…ÙˆØ³Ø¹Ø©ØŒ Ù…Ø«Ø§Ù„ÙŠØ©ØŒ Ø­ÙƒÙŠÙ…Ø©", influence: "ÙŠØ´Ø¬Ø¹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ³Ø¹ Ø§Ù„ÙÙƒØ±ÙŠ ÙˆØ§Ù„Ø±ÙˆØ­ÙŠ", benefits: "Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ø¹Ø§Ù„ÙŠØŒ Ø§Ù„ÙÙ„Ø³ÙØ©ØŒ Ø§Ù„Ø³ÙØ±", challenges: "Ø§Ù„Ø§Ù†ÙØµØ§Ù„ Ø¹Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ© Ø§Ù„Ù…ÙØ±Ø·Ø©"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© ÙˆØ§Ù„Ø·Ù…ÙˆØ­", energy: "Ø·Ù…ÙˆØ­Ø©ØŒ Ù…Ø³Ø¤ÙˆÙ„Ø©ØŒ Ø¹Ù…Ù„ÙŠØ©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ø·Ù…ÙˆØ­ ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©", benefits: "Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„Ù…Ù‡Ù†ÙŠØŒ Ø§Ù„Ø·Ù…ÙˆØ­ØŒ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²", challenges: "Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø²Ø§Ø¦Ø¯ØŒ Ø§Ù„Ø¥Ù‡Ù…Ø§Ù„ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± ÙˆØ§Ù„ØµØ¯Ø§Ù‚Ø©", energy: "Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©ØŒ Ù…Ø¨ØªÙƒØ±Ø©ØŒ ÙˆØ¯ÙˆØ¯Ø©", influence: "ÙŠØ´Ø¬Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± ÙˆØªÙƒÙˆÙŠÙ† Ø§Ù„ØµØ¯Ø§Ù‚Ø§Øª", benefits: "Ø§Ù„ØµØ¯Ø§Ù‚Ø§ØªØŒ Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±ØŒ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ", challenges: "Ø§Ù„ØªØ´ØªØªØŒ Ø¹Ø¯Ù… Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø­Ø¯Ø³ ÙˆØ§Ù„Ø£Ø­Ù„Ø§Ù…", energy: "Ø­Ø¯Ø³ÙŠØ©ØŒ Ø­Ø§Ù„Ù…Ø©ØŒ Ø±ÙˆØ­Ø§Ù†ÙŠØ©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ø­Ø¯Ø³ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø°Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©", benefits: "Ø§Ù„Ø£Ø­Ù„Ø§Ù…ØŒ Ø§Ù„Ø­Ø¯Ø³ØŒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹", challenges: "Ø§Ù„Ù‡Ø±ÙˆØ¨ Ù…Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ Ø§Ù„Ø¥ÙØ±Ø§Ø· ÙÙŠ Ø§Ù„Ø£Ø­Ù„Ø§Ù…"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ ÙˆØ§Ù„ØªØ­ÙˆÙ„", energy: "ØªØ­ÙˆÙ„ÙŠØ©ØŒ Ù†Ù‡Ø§Ø¦ÙŠØ©ØŒ Ù…ØªØ¬Ø¯Ø¯Ø©", influence: "ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ±Ø§Øª ÙˆØ§Ù„ØªØ­ÙˆÙ„", benefits: "Ø§Ù„ØªØ­ÙˆÙ„ØŒ Ø§Ù„Ù†Ù‡Ø§ÙŠØ§ØªØŒ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯", challenges: "Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„ØªØºÙŠÙŠØ±ØŒ Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ù…Ø¬Ù‡ÙˆÙ„"},
  {name: "Ø¨ÙŠØª Ø§Ù„ØªÙˆØ§Ø²Ù† ÙˆØ§Ù„Ø§Ù†Ø³Ø¬Ø§Ù…", energy: "Ù…ØªÙˆØ§Ø²Ù†Ø©ØŒ Ù…ØªÙ†Ø§ØºÙ…Ø©ØŒ Ø³Ù„Ù…ÙŠØ©", influence: "ÙŠØ­Ù‚Ù‚ Ø§Ù„ØªÙˆØ§Ø²Ù† ÙˆØ§Ù„Ø§Ù†Ø³Ø¬Ø§Ù… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ", benefits: "Ø§Ù„Ø³Ù„Ø§Ù… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØŒ Ø§Ù„ØªÙˆØ§Ø²Ù†ØŒ Ø§Ù„Ø§Ù†Ø³Ø¬Ø§Ù…", challenges: "Ø§Ù„Ø®Ù…ÙˆÙ„ØŒ Ø¹Ø¯Ù… Ø§Ù„Ø­Ø³Ù…"},
  {name: "Ø¨ÙŠØª Ø§Ù„ØªØ­Ø¯ÙŠ ÙˆØ§Ù„Ù†Ù…Ùˆ", energy: "ØªØ­Ø¯ÙŠØ©ØŒ Ù†Ù…ÙˆØŒ Ù‚ÙˆØ©", influence: "ÙŠØ´Ø¬Ø¹ Ø¹Ù„Ù‰ Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª ÙˆØ§Ù„Ù†Ù…Ùˆ", benefits: "Ø§Ù„ØµÙ…ÙˆØ¯ØŒ Ø§Ù„Ù‚ÙˆØ©ØŒ Ø§Ù„ØªØ·ÙˆØ±", challenges: "Ø§Ù„ØµØ±Ø§Ø¹Ø§ØªØŒ Ø§Ù„Ø¶ØºØ· Ø§Ù„Ù†ÙØ³ÙŠ"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„ÙØ±Ø­", energy: "Ù…Ø¨Ù‡Ø¬Ø©ØŒ Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©ØŒ Ø®ÙÙŠÙØ©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ ÙˆØ§Ù„ÙØ±Ø­ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ", benefits: "Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ØŒ Ø§Ù„ÙØ±Ø­ØŒ Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„ÙÙ†ÙŠ", challenges: "Ø§Ù„Ø³Ø·Ø­ÙŠØ©ØŒ Ø¹Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ©"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ§Ù„Ø­Ù‚ÙŠÙ‚Ø©", energy: "Ø°Ù‡Ù†ÙŠØ©ØŒ ØªØ­Ù„ÙŠÙ„ÙŠØ©ØŒ ØµØ§Ø¯Ù‚Ø©", influence: "ÙŠØ²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ§Ù„Ø­Ù‚ÙŠÙ‚Ø©", benefits: "Ø§Ù„ØªØ¹Ù„Ù…ØŒ Ø§Ù„Ø¨Ø­Ø«ØŒ Ø§Ù„Ø­ÙƒÙ…Ø©", challenges: "Ø§Ù„Ø´Ùƒ Ø§Ù„Ù…ÙØ±Ø·ØŒ Ø§Ù„Ø¬Ù…ÙˆØ¯ Ø§Ù„ÙÙƒØ±ÙŠ"},
  {name: "Ø¨ÙŠØª Ø§Ù„ØªØºÙŠÙŠØ± ÙˆØ§Ù„ØªØ­Ø±Ø±", energy: "ØªØ­Ø±Ø±ÙŠØ©ØŒ ØªØºÙŠÙŠØ±ØŒ Ø­Ø±ÙŠØ©", influence: "ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„ØªØ­Ø±Ø± Ù…Ù† Ø§Ù„Ù‚ÙŠÙˆØ¯", benefits: "Ø§Ù„Ø­Ø±ÙŠØ©ØŒ Ø§Ù„ØªØºÙŠÙŠØ±ØŒ Ø§Ù„ØªØ­Ø±Ø±", challenges: "Ø§Ù„ÙÙˆØ¶Ù‰ØŒ Ø¹Ø¯Ù… Ø§Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø±"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ø³Ù„Ø·Ø©", energy: "Ù‚ÙŠØ§Ø¯ÙŠØ©ØŒ Ø³Ù„Ø·ÙˆÙŠØ©ØŒ Ù‚ÙˆÙŠØ©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ£Ø«ÙŠØ±", benefits: "Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©ØŒ Ø§Ù„Ø³Ù„Ø·Ø©ØŒ Ø§Ù„ØªØ£Ø«ÙŠØ±", challenges: "Ø§Ù„ØªØ³Ù„Ø·ØŒ Ø§Ù„ØºØ±ÙˆØ±"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø©", energy: "Ø¹Ù…ÙŠÙ‚Ø©ØŒ Ø­ÙƒÙŠÙ…Ø©ØŒ ØªØ£Ù…Ù„ÙŠØ©", influence: "ÙŠØ²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø­ÙƒÙ…Ø© Ø§Ù„Ø¹Ù…ÙŠÙ‚Ø© ÙˆØ§Ù„ÙÙ‡Ù…", benefits: "Ø§Ù„Ø­ÙƒÙ…Ø©ØŒ Ø§Ù„ÙÙ‡Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚ØŒ Ø§Ù„ØªØ£Ù…Ù„", challenges: "Ø§Ù„Ø§Ù†Ø¹Ø²Ø§Ù„ØŒ Ø§Ù„Ø¬Ù…ÙˆØ¯"},
  {name: "Ø¨ÙŠØª Ø§Ù„ØªØ¹Ø¨ÙŠØ± ÙˆØ§Ù„Ø¥Ù„Ù‡Ø§Ù…", energy: "Ø¥Ù„Ù‡Ø§Ù…ÙŠØ©ØŒ ØªØ¹Ø¨ÙŠØ±ÙŠØ©ØŒ ÙÙ†ÙŠØ©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø§Ù„ÙÙ†ÙŠ ÙˆØ§Ù„Ø¥Ù„Ù‡Ø§Ù…", benefits: "Ø§Ù„ÙÙ†ØŒ Ø§Ù„Ø¥Ù„Ù‡Ø§Ù…ØŒ Ø§Ù„ØªØ¹Ø¨ÙŠØ±", challenges: "Ø§Ù„ØªÙ‚Ù„Ø¨ Ø§Ù„Ù…Ø²Ø§Ø¬ÙŠØŒ Ø§Ù„Ø­Ø³Ø§Ø³ÙŠØ© Ø§Ù„Ù…ÙØ±Ø·Ø©"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ", energy: "Ø¬Ù…Ø§Ø¹ÙŠØ©ØŒ ØªØ¹Ø§ÙˆÙ†ÙŠØ©ØŒ ØªÙˆØ§ÙÙ‚ÙŠØ©", influence: "ÙŠØ´Ø¬Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ†", benefits: "Ø§Ù„ØªØ¹Ø§ÙˆÙ†ØŒ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØŒ Ø§Ù„Ø¯Ø¹Ù…", challenges: "ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙØ±Ø¯ÙŠØ©"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± ÙˆØ§Ù„ØªØ¬Ø¯ÙŠØ¯", energy: "Ù…Ø¨ØªÙƒØ±Ø©ØŒ ØªØ¬Ø¯ÙŠØ¯ÙŠØ©ØŒ Ù…ØªØ·ÙˆØ±Ø©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± ÙˆØ§Ù„ØªØ¬Ø¯ÙŠØ¯", benefits: "Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±ØŒ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯ØŒ Ø§Ù„ØªØ·ÙˆÙŠØ±", challenges: "Ø§Ù„ØªØ³Ø±Ø¹ØŒ Ø¹Ø¯Ù… Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙˆØ§Ù„Ø±Ø¹Ø§ÙŠØ©", energy: "Ø­Ø§Ù…ÙŠØ©ØŒ Ø±Ø§Ø¹ÙŠØ©ØŒ Ø¯Ø§Ø¹Ù…Ø©", influence: "ÙŠÙˆÙØ± Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙˆØ§Ù„Ø±Ø¹Ø§ÙŠØ©", benefits: "Ø§Ù„Ø­Ù…Ø§ÙŠØ©ØŒ Ø§Ù„Ø±Ø¹Ø§ÙŠØ©ØŒ Ø§Ù„Ø¯Ø¹Ù…", challenges: "Ø§Ù„ØªØ¨Ø¹ÙŠØ©ØŒ Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„ÙƒÙˆÙ†ÙŠØ©", energy: "ÙƒÙˆÙ†ÙŠØ©ØŒ Ø´Ù…ÙˆÙ„ÙŠØ©ØŒ Ø­ÙƒÙŠÙ…Ø©", influence: "ÙŠØ²ÙŠØ¯ Ù…Ù† Ø§Ù„ÙÙ‡Ù… Ø§Ù„ÙƒÙˆÙ†ÙŠ ÙˆØ§Ù„Ø­ÙƒÙ…Ø©", benefits: "Ø§Ù„Ø­ÙƒÙ…Ø© Ø§Ù„ÙƒÙˆÙ†ÙŠØ©ØŒ Ø§Ù„ÙÙ‡Ù… Ø§Ù„Ø´Ù…ÙˆÙ„ÙŠ", challenges: "Ø§Ù„Ø§Ù†ÙØµØ§Ù„ Ø¹Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø£Ø±Ø¶ÙŠ"},
  {name: "Ø¨ÙŠØª Ø§Ù„ØªØ­ÙˆÙ„ Ø§Ù„Ø±ÙˆØ­ÙŠ", energy: "Ø±ÙˆØ­Ø§Ù†ÙŠØ©ØŒ ØªØ­ÙˆÙ„ÙŠØ©ØŒ Ø¹Ù…ÙŠÙ‚Ø©", influence: "ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„ØªØ­ÙˆÙ„ Ø§Ù„Ø±ÙˆØ­ÙŠ", benefits: "Ø§Ù„Ù†Ù…Ùˆ Ø§Ù„Ø±ÙˆØ­ÙŠØŒ Ø§Ù„ØªØ­ÙˆÙ„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ", challenges: "Ø§Ù„Ù‡Ø±ÙˆØ¨ Ù…Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø¥Ø±Ø§Ø¯Ø© ÙˆØ§Ù„ØªÙ†ÙÙŠØ°", energy: "Ù‚ÙˆÙŠØ©ØŒ Ù…Ù†ÙØ°Ø©ØŒ Ø­Ø§Ø³Ù…Ø©", influence: "ÙŠØ¹Ø²Ø² Ø§Ù„Ø¥Ø±Ø§Ø¯Ø© ÙˆØ§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªÙ†ÙÙŠØ°", benefits: "Ø§Ù„Ø¥Ø±Ø§Ø¯Ø©ØŒ Ø§Ù„ØªÙ†ÙÙŠØ°ØŒ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²", challenges: "Ø§Ù„ØªØµÙ„Ø¨ØŒ Ø¹Ø¯Ù… Ø§Ù„Ù…Ø±ÙˆÙ†Ø©"},
  {name: "Ø¨ÙŠØª Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ ÙˆØ§Ù„Ø¯ÙˆØ±Ø©", energy: "ÙƒØ§Ù…Ù„Ø©ØŒ Ø¯Ø§Ø¦Ø±ÙŠØ©ØŒ Ù†Ù‡Ø§Ø¦ÙŠØ©", influence: "ÙŠØ®ØªØªÙ… Ø§Ù„Ø¯ÙˆØ±Ø© ÙˆÙŠØ¹Ø¯ Ù„Ø¨Ø¯Ø§ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©", benefits: "Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ØŒ Ø§Ù„Ø®ØªØ§Ù…ØŒ Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ù„Ø¬Ø¯ÙŠØ¯", challenges: "Ø§Ù„ØªØ´Ø¨Ø« Ø¨Ø§Ù„Ù…Ø§Ø¶ÙŠØŒ Ø§Ù„Ø®ÙˆÙ Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ§Øª"}
];

// Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù‚Ù…Ø±ÙŠ Ù…Ø¹ Ø§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€
const MOON_MANSIONS = [
  {
    name: "Ø§Ù„Ø´Ø±Ø·Ø§Ù†", 
    letter: "Ø£", 
    angle: 0, 
    meaning: "Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©",
    seal: {
      war: "ÙØ±Ø¯ Ø­Ø±Ø¨ Ø§Ù„ÙØ§Ø¡ Ù„Ù‡Ø§ ØªÙ‡Ø·ÙŠÙ„ Ù†Ø·Ù‡ Ø§Ø­Ø¯ Ø§Ù„Ø´Ù…Ø³",
      talisman: "Ù†Ø¬Ù… Ù…Ø°Ù‡Ø¨ Ø±Ù‚ÙŠÙŠÙ†",
      letterPower: "Ù‚ÙˆØ© Ø§Ù„ÙØ§Ø¡ ÙÙŠ Ø§Ù„Ø­Ø±Ø¨ ÙˆØ§Ù„ØªÙ‡Ø·ÙŠÙ„",
      arabicNames: "Ø§Ù„Ø´Ù…Ø³ØŒ Ø§Ù„Ù‚Ù…Ø±ØŒ Ø§Ù„Ø²Ù‡Ø±Ø©ØŒ Ø¹Ø·Ø§Ø±Ø¯",
      syriacNames: "Ø´Ù…Ø³Ø§ØŒ Ù‚Ù…Ø±Ø§ØŒ Ø²Ù‡Ø±ØªØ§ØŒ Ø¹Ø·Ø§Ø±Ø¯Ùˆ",
      days: "Ø§Ù„Ø£Ø­Ø¯ØŒ Ø§Ù„Ø§Ø«Ù†ÙŠÙ†ØŒ Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡",
      stars: "Ø§Ù„Ø´Ø¹Ø±Ù‰ Ø§Ù„ÙŠÙ…Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ø³Ù…Ø§Ùƒ Ø§Ù„Ø±Ø§Ù…Ø­",
      adhesives: "ØªÙ„Ø§ØµÙ… Ø§Ù„Ù†ÙˆØ± ÙˆØ§Ù„Ø¸Ù„Ù…Ø©",
      earthlyHelpers: "Ø§Ù„Ø¬Ù†ØŒ Ø§Ù„Ø£Ø±ÙˆØ§Ø­ Ø§Ù„Ø£Ø±Ø¶ÙŠØ©",
      heavenlyKings: "Ù…ÙŠÙƒØ§Ø¦ÙŠÙ„ØŒ Ø¬Ø¨Ø±Ø§Ø¦ÙŠÙ„"
    }
  },
  {
    name: "Ø§Ù„Ø¨Ø·ÙŠÙ†", 
    letter: "Ø¨", 
    angle: 12.85, 
    meaning: "Ø§Ù„ØªÙˆØ§Ø²Ù† Ø§Ù„Ø±ÙˆØ­ÙŠ",
    seal: {
      war: "Ø­Ø±Ø¨ Ø§Ù„Ø¨Ø§Ø¡ Ù„Ù„Ø¯ÙØ§Ø¹ ÙˆØ§Ù„Ø­Ù…Ø§ÙŠØ©",
      talisman: "Ù‡Ù„Ø§Ù„ ÙØ¶ÙŠ",
      letterPower: "Ù‚ÙˆØ© Ø§Ù„Ø¨Ø§Ø¡ ÙÙŠ Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙˆØ§Ù„Ø¯ÙØ§Ø¹",
      arabicNames: "Ø§Ù„Ù…Ø´ØªØ±ÙŠØŒ Ø§Ù„Ø²Ù‡Ø±Ø©ØŒ Ø§Ù„Ù…Ø±ÙŠØ®",
      syriacNames: "Ù…Ø´ØªØ±Ù‰ØŒ Ø²Ù‡Ø±ØªØ§ØŒ Ù…Ø±ÙŠØ®Ùˆ",
      days: "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡ØŒ Ø§Ù„Ø®Ù…ÙŠØ³",
      stars: "Ø§Ù„Ù†Ø³Ø± Ø§Ù„ÙˆØ§Ù‚Ø¹ØŒ Ø§Ù„Ù†Ø³Ø± Ø§Ù„Ø·Ø§Ø¦Ø±",
      adhesives: "ØªÙ„Ø§ØµÙ… Ø§Ù„Ø£Ø±Ø¶ ÙˆØ§Ù„Ø³Ù…Ø§Ø¡",
      earthlyHelpers: "Ø§Ù„Ù…Ù„Ø§Ø¦ÙƒØ© Ø§Ù„Ø£Ø±Ø¶ÙŠØ©",
      heavenlyKings: "Ø¹Ø²Ø±Ø§Ø¦ÙŠÙ„ØŒ Ø¥Ø³Ø±Ø§ÙÙŠÙ„"
    }
  },
  {
    name: "Ø§Ù„Ø«Ø±ÙŠØ§", 
    letter: "Ø¬", 
    angle: 25.71, 
    meaning: "Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ÙƒÙˆÙ†ÙŠ",
    seal: {
      war: "Ø­Ø±Ù Ø§Ù„Ø¬ÙŠÙ… Ø¬Ø¨Ø§Ø± Ù…Ù‡Ù…Ø§ ØªØ¹Ø·ÙŠÙ‡",
      talisman: "Ø´Ù…Ø³ Ø°Ù‡Ø¨ÙŠØ©",
      letterPower: "Ù‚ÙˆØ© Ø§Ù„Ø¬ÙŠÙ… ÙÙŠ Ø§Ù„Ø¬Ø¨Ø±ÙˆØª ÙˆØ§Ù„Ù‚ÙˆØ©",
      arabicNames: "Ø§Ù„Ø´Ù…Ø³ØŒ Ø§Ù„Ù‚Ù…Ø±ØŒ Ø²Ø­Ù„",
      syriacNames: "Ø´Ù…Ø³Ø§ØŒ Ù‚Ù…Ø±Ø§ØŒ Ø²Ø­Ø§Ù„",
      days: "Ø§Ù„Ø¬Ù…Ø¹Ø©ØŒ Ø§Ù„Ø³Ø¨Øª",
      stars: "Ø§Ù„Ø«Ø±ÙŠØ§ØŒ Ø§Ù„Ø¯Ø¨Ø±Ø§Ù†",
      adhesives: "ØªÙ„Ø§ØµÙ… Ø§Ù„Ù†Ø§Ø± ÙˆØ§Ù„Ù…Ø§Ø¡",
      earthlyHelpers: "Ø§Ù„Ø¹ÙØ§Ø±ÙŠØª Ø§Ù„Ù†Ø§Ø±ÙŠØ©",
      heavenlyKings: "Ø¬Ø¨Ø±ÙŠÙ„ØŒ Ù…ÙŠÙƒØ§Ø¦ÙŠÙ„"
    }
  },
  {
    name: "Ø§Ù„Ø¯Ø¨Ø±Ø§Ù†", 
    letter: "Ø¯", 
    angle: 38.57, 
    meaning: "Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©",
    seal: {
      war: "Ø­Ø±Ø¨ Ø§Ù„Ø¯Ø§Ù„ Ù„Ù„Ù‚ÙˆØ© ÙˆØ§Ù„ØµÙ„Ø§Ø¨Ø©",
      talisman: "Ø¯Ø±Ø¹ Ø­Ø¯ÙŠØ¯ÙŠ",
      letterPower: "Ù‚ÙˆØ© Ø§Ù„Ø¯Ø§Ù„ ÙÙŠ Ø§Ù„ØµÙ„Ø§Ø¨Ø© ÙˆØ§Ù„Ù…ØªØ§Ù†Ø©",
      arabicNames: "Ø§Ù„Ù…Ø±ÙŠØ®ØŒ Ø§Ù„Ø²Ù‡Ø±Ø©ØŒ Ø¹Ø·Ø§Ø±Ø¯",
      syriacNames: "Ù…Ø±ÙŠØ®ÙˆØŒ Ø²Ù‡Ø±ØªØ§ØŒ Ø¹Ø·Ø§Ø±Ø¯Ùˆ",
      days: "Ø§Ù„Ø£Ø­Ø¯ØŒ Ø§Ù„Ø§Ø«Ù†ÙŠÙ†",
      stars: "Ø§Ù„Ø¯Ø¨Ø±Ø§Ù†ØŒ Ù‚Ù„Ø¨ Ø§Ù„Ø¹Ù‚Ø±Ø¨",
      adhesives: "ØªÙ„Ø§ØµÙ… Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„Ù†Ø§Ø±",
      earthlyHelpers: "Ø§Ù„Ø¬Ù† Ø§Ù„Ù…Ø¹Ø¯Ù†ÙŠ",
      heavenlyKings: "Ø¹Ø²Ø±Ø§Ø¦ÙŠÙ„ØŒ Ù…ÙŠÙƒØ§Ø¦ÙŠÙ„"
    }
  },
  {
    name: "Ø§Ù„Ù‡Ù‚Ø¹Ø©", 
    letter: "Ù‡", 
    angle: 51.43, 
    meaning: "Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¥Ù„Ù‡ÙŠØ©",
    seal: {
      war: "Ø­Ø±Ø¨ Ø§Ù„Ù‡Ø§Ø¡ Ù„Ù„Ø³ØªØ± ÙˆØ§Ù„Ø­Ù…Ø§ÙŠØ©",
      talisman: "Ø®Ø§ØªÙ… ÙØ¶ÙŠ",
      letterPower: "Ù‚ÙˆØ© Ø§Ù„Ù‡Ø§Ø¡ ÙÙŠ Ø§Ù„Ø­Ù…Ø§ÙŠØ© ÙˆØ§Ù„Ø³ØªØ±",
      arabicNames: "Ø§Ù„Ù‚Ù…Ø±ØŒ Ø§Ù„Ù…Ø´ØªØ±ÙŠØŒ Ø²Ø­Ù„",
      syriacNames: "Ù‚Ù…Ø±Ø§ØŒ Ù…Ø´ØªØ±Ù‰ØŒ Ø²Ø­Ø§Ù„",
      days: "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡ØŒ Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡",
      stars: "Ø³Ù‡ÙŠÙ„ØŒ ÙÙ… Ø§Ù„Ø­ÙˆØª",
      adhesives: "ØªÙ„Ø§ØµÙ… Ø§Ù„Ù…Ø§Ø¡ ÙˆØ§Ù„Ù‡ÙˆØ§Ø¡",
      earthlyHelpers: "Ø£Ø±ÙˆØ§Ø­ Ø§Ù„Ù…Ø§Ø¡",
      heavenlyKings: "Ø¬Ø¨Ø±Ø§Ø¦ÙŠÙ„ØŒ Ø±Ø§ÙØ§Ø¦ÙŠÙ„"
    }
  },
  {
    name: "Ø§Ù„Ù‡Ù†Ø¹Ø©", 
    letter: "Ùˆ", 
    angle: 64.28, 
    meaning: "Ø§Ù„Ø±Ø­Ù…Ø© Ø§Ù„Ø³Ù…Ø§ÙˆÙŠØ©",
    seal: {
      war: "Ø­Ø±Ø¨ Ø§Ù„ÙˆØ§Ùˆ Ù„Ù„Ø±Ø­Ù…Ø© ÙˆØ§Ù„Ù…ØºÙØ±Ø©",
      talisman: "Ø³Ø­Ø§Ø¨Ø© Ø¨ÙŠØ¶Ø§Ø¡",
      letterPower: "Ù‚ÙˆØ© Ø§Ù„ÙˆØ§Ùˆ ÙÙŠ Ø§Ù„Ø±Ø­Ù…Ø© ÙˆØ§Ù„Ø¹Ø·Ù",
      arabicNames: "Ø§Ù„Ø²Ù‡Ø±Ø©ØŒ Ø¹Ø·Ø§Ø±Ø¯ØŒ Ø§Ù„Ø´Ù…Ø³",
      syriacNames: "Ø²Ù‡Ø±ØªØ§ØŒ Ø¹Ø·Ø§Ø±Ø¯ÙˆØŒ Ø´Ù…Ø³Ø§",
      days: "Ø§Ù„Ø®Ù…ÙŠØ³ØŒ Ø§Ù„Ø¬Ù…Ø¹Ø©",
      stars: "Ø§Ù„Ø±Ø´Ø§ØŒ Ø§Ù„ÙØ±Ù‚",
      adhesives: "ØªÙ„Ø§ØµÙ… Ø§Ù„Ø³Ø­Ø§Ø¨ ÙˆØ§Ù„Ù…Ø·Ø±",
      earthlyHelpers: "Ø£Ø±ÙˆØ§Ø­ Ø§Ù„Ù‡ÙˆØ§Ø¡",
      heavenlyKings: "Ø¥Ø³Ø±Ø§ÙÙŠÙ„ØŒ Ø¹Ø²Ø±Ø§Ø¦ÙŠÙ„"
    }
  },
  {
    name: "Ø§Ù„Ø°Ø±Ø§Ø¹", 
    letter: "Ø²", 
    angle: 77.14, 
    meaning: "Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø¬Ø³Ø¯ÙŠØ©",
    seal: {
      war: "Ø­Ø±Ø¨ Ø§Ù„Ø²Ø§ÙŠ Ù„Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ø¶Ø±Ø¨",
      talisman: "Ø³ÙŠÙ ÙÙˆÙ„Ø§Ø°ÙŠ",
      letterPower: "Ù‚ÙˆØ© Ø§Ù„Ø²Ø§ÙŠ ÙÙŠ Ø§Ù„Ø¶Ø±Ø¨ ÙˆØ§Ù„Ù‡Ø¬ÙˆÙ…",
      arabicNames: "Ø§Ù„Ù…Ø±ÙŠØ®ØŒ Ø²Ø­Ù„ØŒ Ø§Ù„Ù‚Ù…Ø±",
      syriacNames: "Ù…Ø±ÙŠØ®ÙˆØŒ Ø²Ø­Ø§Ù„ØŒ Ù‚Ù…Ø±Ø§",
      days: "Ø§Ù„Ø³Ø¨ØªØŒ Ø§Ù„Ø£Ø­Ø¯",
      stars: "Ø°Ø§Øª Ø§Ù„ÙƒØ±Ø³ÙŠØŒ Ø§Ù„ÙÙƒØ©",
      adhesives: "ØªÙ„Ø§ØµÙ… Ø§Ù„Ù†Ø§Ø± ÙˆØ§Ù„Ø­Ø¯ÙŠØ¯",
      earthlyHelpers: "Ø§Ù„Ø¬Ù† Ø§Ù„Ù…Ø­Ø§Ø±Ø¨",
      heavenlyKings: "Ù…ÙŠÙƒØ§Ø¦ÙŠÙ„ØŒ Ø¬Ø¨Ø±Ø§Ø¦ÙŠÙ„"
    }
  },
  {
    name: "Ø§Ù„Ù†Ø«Ø±Ø©", 
    letter: "Ø­", 
    angle: 90.0, 
    meaning: "Ø§Ù„Ø¨ØµÙŠØ±Ø© Ø§Ù„Ù†Ø§ÙØ°Ø©",
    seal: {
      war: "Ø­Ø±Ø¨ Ø§Ù„Ø­Ø§Ø¡ Ù„Ù„Ø±Ø¤ÙŠØ© ÙˆØ§Ù„Ø§Ø³ØªØ¨ØµØ§Ø±",
      talisman: "Ø¹ÙŠÙ† Ø°Ù‡Ø¨ÙŠØ©",
      letterPower: "Ù‚ÙˆØ© Ø§Ù„Ø­Ø§Ø¡ ÙÙŠ Ø§Ù„Ø¨ØµÙŠØ±Ø© ÙˆØ§Ù„Ø±Ø¤ÙŠØ©",
      arabicNames: "Ø¹Ø·Ø§Ø±Ø¯ØŒ Ø§Ù„Ø´Ù…Ø³ØŒ Ø§Ù„Ø²Ù‡Ø±Ø©",
      syriacNames: "Ø¹Ø·Ø§Ø±Ø¯ÙˆØŒ Ø´Ù…Ø³Ø§ØŒ Ø²Ù‡Ø±ØªØ§",
      days: "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†ØŒ Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡",
      stars: "Ø§Ù„Ù†Ø«Ø±Ø©ØŒ Ø§Ù„Ø·Ø±ÙØ©",
      adhesives: "ØªÙ„Ø§ØµÙ… Ø§Ù„Ù†ÙˆØ± ÙˆØ§Ù„Ø¹ØªÙ…Ø©",
      earthlyHelpers: "Ø£Ø±ÙˆØ§Ø­ Ø§Ù„Ù†ÙˆØ±",
      heavenlyKings: "Ø±Ø§ÙØ§Ø¦ÙŠÙ„ØŒ Ø¹Ø²Ø±Ø§Ø¦ÙŠÙ„"
    }
  }
  // ... Ø³ÙŠØªÙ… Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø¨Ù‚ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø¨Ù†ÙØ³ Ø§Ù„Ù†Ù…Ø·
];

// Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø£Ø¨Ùˆ Ù…Ø¹Ø´Ø± ÙˆÙÙ‚ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø£ØµÙ„ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ
const ABU_MASHAR_TABLE = MOON_MANSIONS.map((item, index) => ({
  name: item.name,
  degree: item.angle.toFixed(2),
  secret: String.fromCharCode(0x0600 + index + 1),
  property: item.meaning
}));

// Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­Ø³Ù†Ù‰ (99 Ø§Ø³Ù…Ø§Ù‹) â€” ØªØ¨Ø¯Ø£ Ø¨Ù€ "Ø§Ù„Ù„Ù‡" ÙˆØªÙ†ØªÙ‡ÙŠ Ø¨Ù€ "Ø§Ù„ØµØ¨ÙˆØ±"
const ASMA_UL_HUSNA = [
  "Ø§Ù„Ù„Ù‡","Ø§Ù„Ø±Ø­Ù…Ù†","Ø§Ù„Ø±Ø­ÙŠÙ…","Ø§Ù„Ù…Ù„Ùƒ","Ø§Ù„Ù‚Ø¯ÙˆØ³","Ø§Ù„Ø³Ù„Ø§Ù…","Ø§Ù„Ù…Ø¤Ù…Ù†","Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†","Ø§Ù„Ø¹Ø²ÙŠØ²","Ø§Ù„Ø¬Ø¨Ø§Ø±",
  "Ø§Ù„Ù…ØªÙƒØ¨Ø±","Ø§Ù„Ø®Ø§Ù„Ù‚","Ø§Ù„Ø¨Ø§Ø±Ø¦","Ø§Ù„Ù…ØµÙˆØ±","Ø§Ù„ØºÙØ§Ø±","Ø§Ù„Ù‚Ù‡Ø§Ø±","Ø§Ù„ÙˆÙ‡Ø§Ø¨","Ø§Ù„Ø±Ø²Ø§Ù‚","Ø§Ù„ÙØªØ§Ø­","Ø§Ù„Ø¹Ù„ÙŠÙ…",
  "Ø§Ù„Ù‚Ø§Ø¨Ø¶","Ø§Ù„Ø¨Ø§Ø³Ø·","Ø§Ù„Ø®Ø§ÙØ¶","Ø§Ù„Ø±Ø§ÙØ¹","Ø§Ù„Ù…Ø¹Ø²","Ø§Ù„Ù…Ø°Ù„","Ø§Ù„Ø³Ù…ÙŠØ¹","Ø§Ù„Ø¨ØµÙŠØ±","Ø§Ù„Ø­ÙƒÙ…","Ø§Ù„Ø¹Ø¯Ù„",
  "Ø§Ù„Ù„Ø·ÙŠÙ","Ø§Ù„Ø®Ø¨ÙŠØ±","Ø§Ù„Ø­Ù„ÙŠÙ…","Ø§Ù„Ø¹Ø¸ÙŠÙ…","Ø§Ù„ØºÙÙˆØ±","Ø§Ù„Ø´ÙƒÙˆØ±","Ø§Ù„Ø¹Ù„ÙŠ","Ø§Ù„ÙƒØ¨ÙŠØ±","Ø§Ù„Ø­ÙÙŠØ¸","Ø§Ù„Ù…Ù‚ÙŠØª",
  "Ø§Ù„Ø­Ø³ÙŠØ¨","Ø§Ù„Ø¬Ù„ÙŠÙ„","Ø§Ù„ÙƒØ±ÙŠÙ…","Ø§Ù„Ø±Ù‚ÙŠØ¨","Ø§Ù„Ù…Ø¬ÙŠØ¨","Ø§Ù„ÙˆØ§Ø³Ø¹","Ø§Ù„Ø­ÙƒÙŠÙ…","Ø§Ù„ÙˆØ¯ÙˆØ¯","Ø§Ù„Ù…Ø¬ÙŠØ¯","Ø§Ù„Ø¨Ø§Ø¹Ø«",
  "Ø§Ù„Ø´Ù‡ÙŠØ¯","Ø§Ù„Ø­Ù‚","Ø§Ù„ÙˆÙƒÙŠÙ„","Ø§Ù„Ù‚ÙˆÙŠ","Ø§Ù„Ù…ØªÙŠÙ†","Ø§Ù„ÙˆÙ„ÙŠ","Ø§Ù„Ø­Ù…ÙŠØ¯","Ø§Ù„Ù…Ø­ØµÙŠ","Ø§Ù„Ù…Ø¨Ø¯Ø¦","Ø§Ù„Ù…Ø¹ÙŠØ¯",
  "Ø§Ù„Ù…Ø­ÙŠÙŠ","Ø§Ù„Ù…Ù…ÙŠØª","Ø§Ù„Ø­ÙŠ","Ø§Ù„Ù‚ÙŠÙˆÙ…","Ø§Ù„ÙˆØ§Ø¬Ø¯","Ø§Ù„Ù…Ø§Ø¬Ø¯","Ø§Ù„ÙˆØ§Ø­Ø¯","Ø§Ù„ØµÙ…Ø¯","Ø§Ù„Ù‚Ø§Ø¯Ø±","Ø§Ù„Ù…Ù‚ØªØ¯Ø±",
  "Ø§Ù„Ù…Ù‚Ø¯Ù…","Ø§Ù„Ù…Ø¤Ø®Ø±","Ø§Ù„Ø£ÙˆÙ„","Ø§Ù„Ø¢Ø®Ø±","Ø§Ù„Ø¸Ø§Ù‡Ø±","Ø§Ù„Ø¨Ø§Ø·Ù†","Ø§Ù„ÙˆØ§Ù„ÙŠ","Ø§Ù„Ù…ØªØ¹Ø§Ù„ÙŠ","Ø§Ù„Ø¨Ø±","Ø§Ù„ØªÙˆØ§Ø¨",
  "Ø§Ù„Ù…Ù†ØªÙ‚Ù…","Ø§Ù„Ø¹ÙÙˆ","Ø§Ù„Ø±Ø¤ÙˆÙ","Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…Ù„Ùƒ","Ø°Ùˆ Ø§Ù„Ø¬Ù„Ø§Ù„ ÙˆØ§Ù„Ø¥ÙƒØ±Ø§Ù…","Ø§Ù„Ù…Ù‚Ø³Ø·","Ø§Ù„Ø¬Ø§Ù…Ø¹","Ø§Ù„ØºÙ†ÙŠ","Ø§Ù„Ù…ØºÙ†ÙŠ",
  "Ø§Ù„Ù…Ø§Ù†Ø¹","Ø§Ù„Ø¶Ø§Ø±","Ø§Ù„Ù†Ø§ÙØ¹","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„Ù‡Ø§Ø¯ÙŠ","Ø§Ù„Ø¨Ø¯ÙŠØ¹","Ø§Ù„Ø¨Ø§Ù‚ÙŠ","Ø§Ù„ÙˆØ§Ø±Ø«","Ø§Ù„Ø±Ø´ÙŠØ¯","Ø§Ù„ØµØ¨ÙˆØ±"
];

// Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ (1..7) Ù…Ø¹ Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚ØŒ ÙˆØªØ¯ÙˆÙŠØ± ÙŠØ¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø£Ø­Ø¯ ÙƒÙ…Ø§ Ø·ÙÙ„ÙØ¨
const WEEK_DAYS = [
  {name:"Ø§Ù„Ø£Ø­Ø¯", num:1, planet:"Ø§Ù„Ø´Ù…Ø³"},
  {name:"Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†", num:2, planet:"Ø§Ù„Ù‚Ù…Ø±"},
  {name:"Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", num:3, planet:"Ø§Ù„Ù…Ø±ÙŠØ®"},
  {name:"Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", num:4, planet:"Ø¹Ø·Ø§Ø±Ø¯"},
  {name:"Ø§Ù„Ø®Ù…ÙŠØ³", num:5, planet:"Ø§Ù„Ù…Ø´ØªØ±ÙŠ"},
  {name:"Ø§Ù„Ø¬Ù…Ø¹Ø©", num:6, planet:"Ø§Ù„Ø²Ù‡Ø±Ø©"},
  {name:"Ø§Ù„Ø³Ø¨Øª", num:7, planet:"Ø²Ø­Ù„"}
];

// Ø®Ø¯Ø§Ù… Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠÙŠÙ† ÙˆØ§Ù„Ø³ÙÙ„ÙŠÙŠÙ† ÙˆØ§Ù„ÙˆØ³Ø·ÙŠÙŠÙ†
const DAY_SERVANTS = {
  "Ø§Ù„Ø£Ø­Ø¯":{upper:"Ù…ÙŠÙƒØ§Ø¦ÙŠÙ„", middle:"Ø¹Ø²Ø±Ø§Ø¦ÙŠÙ„", lower:"Ø¬Ø¨Ø±ÙŠÙ„"},
  "Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†":{upper:"Ø±ÙØ§Ø¦ÙŠÙ„", middle:"Ø³Ø±ÙˆÙŠØ§Ù„", lower:"ØµØ¯ÙŠÙ‚Ø§Ø¦ÙŠÙ„"},
  "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡":{upper:"Ø³Ù…Ø§Ø¦ÙŠÙ„", middle:"Ù†ÙˆØ±Ø§Ø¦ÙŠÙ„", lower:"Ø¹Ø²Ø±Ø§Ø¦ÙŠÙ„"},
  "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡":{upper:"Ø¹Ø²Ø±Ø§Ø¦ÙŠÙ„", middle:"Ù…Ø§Ù„ÙƒØ§Ø¦ÙŠÙ„", lower:"ÙƒØ§Ø³ÙØ§Ø¦ÙŠÙ„"},
  "Ø§Ù„Ø®Ù…ÙŠØ³":{upper:"Ø¬Ø¨Ø±ÙŠÙ„", middle:"ØµØ¯ÙŠÙ‚Ø§Ø¦ÙŠÙ„", lower:"Ù†ÙˆØ±Ø§Ø¦ÙŠÙ„"},
  "Ø§Ù„Ø¬Ù…Ø¹Ø©":{upper:"ØµØ¯ÙŠÙ‚Ø§Ø¦ÙŠÙ„", middle:"ÙƒØ§Ø³ÙØ§Ø¦ÙŠÙ„", lower:"Ø³Ø±ÙˆÙŠØ§Ù„"},
  "Ø§Ù„Ø³Ø¨Øª":{upper:"Ù…Ø§Ù„ÙƒØ§Ø¦ÙŠÙ„", middle:"Ù…ÙŠÙƒØ§Ø¦ÙŠÙ„", lower:"Ø±ÙØ§Ø¦ÙŠÙ„"}
};

// Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³ÙˆØ± Ù…Ù† 1 Ø¥Ù„Ù‰ 64
const SURAHS = [
  "Ø§Ù„ÙØ§ØªØ­Ø©", "Ø§Ù„Ø¨Ù‚Ø±Ø©", "Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†", "Ø§Ù„Ù†Ø³Ø§Ø¡", "Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©", "Ø§Ù„Ø£Ù†Ø¹Ø§Ù…", "Ø§Ù„Ø£Ø¹Ø±Ø§Ù", "Ø§Ù„Ø£Ù†ÙØ§Ù„",
  "Ø§Ù„ØªÙˆØ¨Ø©", "ÙŠÙˆÙ†Ø³", "Ù‡ÙˆØ¯", "ÙŠÙˆØ³Ù", "Ø§Ù„Ø±Ø¹Ø¯", "Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", "Ø§Ù„Ø­Ø¬Ø±", "Ø§Ù„Ù†Ø­Ù„",
  "Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡", "Ø§Ù„ÙƒÙ‡Ù", "Ù…Ø±ÙŠÙ…", "Ø·Ù‡", "Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡", "Ø§Ù„Ø­Ø¬", "Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†", "Ø§Ù„Ù†ÙˆØ±",
  "Ø§Ù„ÙØ±Ù‚Ø§Ù†", "Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡", "Ø§Ù„Ù†Ù…Ù„", "Ø§Ù„Ù‚ØµØµ", "Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª", "Ø§Ù„Ø±ÙˆÙ…", "Ù„Ù‚Ù…Ø§Ù†", "Ø§Ù„Ø³Ø¬Ø¯Ø©",
  "Ø§Ù„Ø£Ø­Ø²Ø§Ø¨", "Ø³Ø¨Ø£", "ÙØ§Ø·Ø±", "ÙŠØ³", "Ø§Ù„ØµØ§ÙØ§Øª", "Øµ", "Ø§Ù„Ø²Ù…Ø±", "ØºØ§ÙØ±",
  "ÙØµÙ„Øª", "Ø§Ù„Ø´ÙˆØ±Ù‰", "Ø§Ù„Ø²Ø®Ø±Ù", "Ø§Ù„Ø¯Ø®Ø§Ù†", "Ø§Ù„Ø¬Ø§Ø«ÙŠØ©", "Ø§Ù„Ø£Ø­Ù‚Ø§Ù", "Ù…Ø­Ù…Ø¯", "Ø§Ù„ÙØªØ­",
  "Ø§Ù„Ø­Ø¬Ø±Ø§Øª", "Ù‚", "Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª", "Ø§Ù„Ø·ÙˆØ±", "Ø§Ù„Ù†Ø¬Ù…", "Ø§Ù„Ù‚Ù…Ø±", "Ø§Ù„Ø±Ø­Ù…Ù†", "Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©",
  "Ø§Ù„Ø­Ø¯ÙŠØ¯", "Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©", "Ø§Ù„Ø­Ø´Ø±", "Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©", "Ø§Ù„ØµÙ", "Ø§Ù„Ø¬Ù…Ø¹Ø©", "Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†", "Ø§Ù„ØªØºØ§Ø¨Ù†"
];

const baseClasses = ['c-red','c-black','c-white'];

/* ---------- Ø¹Ù†Ø§ØµØ± DOM ---------- */
const gridEl = document.getElementById('grid');
const rowNumbersEl = document.getElementById('rowNumbers');
const textInput = document.getElementById('textInput');
const btnLoad = document.getElementById('btnLoad');
const btnLoadFromInput = document.getElementById('btnLoadFromInput');
const btnReset = document.getElementById('btnReset');
const btnRandom = document.getElementById('btnRandom');
const btnSpectrum = document.getElementById('btnSpectrum');
const btnPrev = document.getElementById('btnPrev');
const btnNext = document.getElementById('btnNext');
const btnSubmit = document.getElementById('btnSubmit');
const btnFillDemo = document.getElementById('btnFillDemo');
const revealedCountEl = document.getElementById('revealedCount');
const currentWordEl = document.getElementById('currentWord');
const modeSelect = document.getElementById('mode');
const sizeRange = document.getElementById('sizeRange');
const sizeValue = document.getElementById('sizeValue');
const rainbowLegend = document.getElementById('rainbowLegend');
const houseModal = document.getElementById('houseModal');
const modalHouseName = document.getElementById('modalHouseName');
const modalHouseNumber = document.getElementById('modalHouseNumber');
const modalHouseLetter = document.getElementById('modalHouseLetter');
const modalHouseZodiac = document.getElementById('modalHouseZodiac');
const modalHouseGematria = document.getElementById('modalHouseGematria');
const modalHouseCycle = document.getElementById('modalHouseCycle');
const modalHouseEnergy = document.getElementById('modalHouseEnergy');
const modalHouseInfluence = document.getElementById('modalHouseInfluence');
const modalHouseBenefits = document.getElementById('modalHouseBenefits');
const modalHouseChallenges = document.getElementById('modalHouseChallenges');
const modalMansionName = document.getElementById('modalMansionName');
const modalMansionLetter = document.getElementById('modalMansionLetter');
const modalMansionAngle = document.getElementById('modalMansionAngle');
const modalMansionMeaning = document.getElementById('modalMansionMeaning');
const modalSealWar = document.getElementById('modalSealWar');
const modalSealTalisman = document.getElementById('modalSealTalisman');
const modalSealLetterPower = document.getElementById('modalSealLetterPower');
const modalSealArabicNames = document.getElementById('modalSealArabicNames');
const modalSealSyriacNames = document.getElementById('modalSealSyriacNames');
const modalSealDays = document.getElementById('modalSealDays');
const modalSealStars = document.getElementById('modalSealStars');
const modalSealAdhesives = document.getElementById('modalSealAdhesives');
const modalSealEarthlyHelpers = document.getElementById('modalSealEarthlyHelpers');
const modalSealHeavenlyKings = document.getElementById('modalSealHeavenlyKings');
const closeHouseModal = document.getElementById('closeHouseModal');

// Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù‚Ù…Ø±ÙŠ (Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø«Ø§Ù†ÙŠ)
const dateInput = document.getElementById('dateInput');
const btnAnalyze = document.getElementById('btnAnalyze');
const btnToggleTables = document.getElementById('btnToggleTables');
const outputEl = document.getElementById('output');
const mainTable = document.getElementById('mainTable');
const mansionBody = document.getElementById('mansionBody');
const abumasharTable = document.getElementById('abumasharTable');
const abumasharBody = document.getElementById('abumasharBody');

let BOARD = 8, TOTAL = BOARD*BOARD;

/* ---------- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ---------- */
let words = Array.from({length:TOTAL}, (_,i)=>''); // ÙƒÙ„Ù…Ø§Øª Ù…Ø®ØµØµØ© Ù„ÙƒÙ„ Ù…Ø±Ø¨Ø¹ (index 0..63 ØªØ±ØªÙŠØ¨ Ø§Ù„ÙƒØ´Ù)
let assignedClass = new Array(TOTAL).fill(null); // class Ø§Ù„Ù„ÙˆÙ† Ù„ÙƒÙ„ Ù…Ø±Ø¨Ø¹
let revealed = new Array(TOTAL).fill(false);
let currentIndex = 0;
let cells = []; // DOM for each index

// Ø­Ø§Ù„Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø§Ù„Ù€ 28
let currentHouse = 0;
let houseCycleCount = 1;

/* ---------- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ---------- */
function cleanText(t){
  return t.replace(/[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06ED]/g,'').trim();
}
function splitToWords(text){
  if(!text) return [];
  const cleaned = text.replace(/[ØŒ!ØŸ.Ø›,:()\"Â«Â»<>â€”â€“\-]/g,' ');
  const parts = cleaned.split(/\s+/).map(s=>s.trim()).filter(Boolean);
  return parts;
}
function computeAbjad(word){
  let s = cleanText(word).toLowerCase();
  let total = 0;
  for(let ch of s){
    if(abjadMap[ch]) total += abjadMap[ch];
  }
  return total;
}

/* Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ù‡ ÙˆØ¯ÙˆØ±Ø© Ø§Ù„Ø£ÙŠØ§Ù… Ù„ÙƒÙ„ Ø®Ø§Ù†Ø© */
function getAsmaByIndex(i){
  const idx = i % ASMA_UL_HUSNA.length;
  return {name: ASMA_UL_HUSNA[idx], num: idx+1};
}
function getWeekDayByIndex(i){
  const d = WEEK_DAYS[i % WEEK_DAYS.length];
  return d;
}
function getKhadimByDayName(dayName){
  return DAY_SERVANTS[dayName] || {upper:"â€”", middle:"â€”", lower:"â€”"};
}

/* ---------- Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø© ---------- */
function buildGrid(){
  gridEl.innerHTML = '';
  cells = [];
  for(let idx=0; idx<TOTAL; idx++){
    const cell = document.createElement('div');
    cell.className = 'cell hidden';
    cell.dataset.index = idx;
    cell.dataset.house = idx % 28; // Ø¥Ø¶Ø§ÙØ© Ø®Ø§ØµÙŠØ© Ø§Ù„Ù…Ù†Ø²Ù„

    // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø«Ø§Ø¨ØªØ©: Ø±Ù‚Ù…ØŒ Ø­Ø±Ù Ø£Ø¨Ø¬Ø¯ÙŠØŒ Ø¨Ø±Ø¬
    const num = document.createElement('div'); num.className='meta-num';
    num.innerHTML = String(idx+1); // Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¨Ø¹ 1..64
    cell.appendChild(num);

    const letterDiv = document.createElement('div'); letterDiv.className='meta-letter';
    const letter = arabicLetters[idx % arabicLetters.length];
    letterDiv.innerHTML = letter;
    cell.appendChild(letterDiv);

    const tower = document.createElement('div'); tower.className='meta-tower';
    const towerIdx = (idx % 12);
    const sign = zodiacSigns[towerIdx];
    const elementClass = elementColors[sign.element];
    tower.innerHTML = `<span class="${elementClass}">${sign.name} (${towerIdx + 1})</span>`;
    cell.appendChild(tower);

    // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒÙ„Ù…Ø©
    const wordEl = document.createElement('div'); wordEl.className='word'; wordEl.innerText = words[idx] || '';
    cell.appendChild(wordEl);

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¬Ù…Ù„ ØªØ­Øª Ø§Ù„ÙƒÙ„Ù…Ø©
    const gemEl = document.createElement('div'); gemEl.className='gematria'; gemEl.innerText = words[idx] ? computeAbjad(words[idx]) : '';
    cell.appendChild(gemEl);

    // Ø¥Ø¶Ø§ÙØ§Øª: Ø§Ø³Ù… Ø§Ù„Ù„Ù‡ØŒ Ø§Ù„ÙŠÙˆÙ… ÙˆØ§Ù„ÙƒÙˆÙƒØ¨ØŒ ÙˆØ§Ù„Ø®Ø§Ø¯Ù…
    const extras = document.createElement('div'); extras.className='extras';
    extras.innerHTML = renderExtras(idx);
    cell.appendChild(extras);

    // Ø£Ø­Ø¯Ø§Ø« ÙƒØ´Ù ÙˆÙ†Ù‚Ø±
    cell.addEventListener('mouseenter', onCellHover);
    cell.addEventListener('click', onCellClick);
    
    // Ø­Ø¯Ø« Ø§Ù„Ø¶ØºØ· Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠ
    cell.addEventListener('dblclick', onCellDoubleClick);

    gridEl.appendChild(cell);
    cells.push(cell);
  }
  applyChessColors(); // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ø´Ø·Ø±Ù†Ø¬ÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
  updateStatus();
  buildRowNumbers();
  renderRainbowLegend();
}

function renderExtras(idx){
  const surah = SURAHS[idx]; // Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ù† 1 Ø¥Ù„Ù‰ 64
  const asm = getAsmaByIndex(idx);
  const d = getWeekDayByIndex(idx);
  const kh = getKhadimByDayName(d.name);
  return `
    <div class="part surah">Ø³ÙˆØ±Ø©: ${surah} (${idx+1})</div>
    <div class="part day">Ø§Ù„ÙŠÙˆÙ…: ${d.num} â€” ${d.name} â€¢ Ø§Ù„ÙƒÙˆÙƒØ¨: ${d.planet}</div>
    <div class="part kh">Ø®Ø¯Ø§Ù…: Ø§Ù„Ø¹Ù„ÙˆÙŠ: ${kh.upper} â€¢ Ø§Ù„ÙˆØ³Ø·ÙŠ: ${kh.middle} â€¢ Ø§Ù„Ø³ÙÙ„ÙŠ: ${kh.lower}</div>
  `;
}

function updateExtras(idx){
  const el = cells[idx].querySelector('.extras');
  if(el) el.innerHTML = renderExtras(idx);
}

function buildRowNumbers() {
  rowNumbersEl.innerHTML = '';
  for (let i = 1; i <= BOARD; i++) {
    const div = document.createElement('div');
    div.textContent = i;
    rowNumbersEl.appendChild(div);
  }
}

/* ---------- Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø´Ø·Ø±Ù†Ø¬ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ---------- */
function applyChessColors(){
  for(let idx=0; idx<TOTAL; idx++){
    const {r,c} = indexToRC(idx);
    const even = ((r + c) % 2 === 0);
    const base = even ? 'c-black' : 'c-white';
    assignedClass[idx] = base;
    cells[idx].className = 'cell hidden ' + base;
    cells[idx].querySelector('.word').innerText = words[idx] || '';
    cells[idx].querySelector('.gematria').innerText = words[idx] ? computeAbjad(words[idx]) : '';
    updateExtras(idx);
  }
}

/* ---------- ØªØ­ÙˆÙŠÙ„ Ø¨ÙŠÙ† index Ùˆ row/col ---------- */
function indexToRC(idx){
  const row = Math.floor(idx / BOARD);
  const col = BOARD - 1 - (idx % BOARD);
  return {r:row, c:col};
}
function rcToIndex(row,col){
  return row * BOARD + (BOARD - 1 - col);
}

/* ---------- ØªÙ„ÙˆÙŠÙ† Ø¹Ø´ÙˆØ§Ø¦ÙŠ ÙˆØ£Ù„ÙˆØ§Ù† Ø§Ù„Ø·ÙŠÙ ---------- */
function randomColoring(){
  for(let i=0;i<TOTAL;i++){
    const cls = baseClasses[Math.floor(Math.random()*baseClasses.length)];
    assignedClass[i] = cls;
    cells[i].className = 'cell hidden ' + cls;
  }
}
function rainbowColoring(){
  for(let i=0;i<TOTAL;i++){
    const obj = rainbow[i % rainbow.length];
    cells[i].className = 'cell hidden ' + obj.cls;
    assignedClass[i] = obj.cls;
  }
}

/* ---------- ÙƒØ´Ù/Ø¥Ø®ÙØ§Ø¡ ---------- */
function revealIndex(i){
  if(i<0||i>=TOTAL) return;
  if(!revealed[i]){
    revealed[i] = true;
    cells[i].classList.remove('hidden'); cells[i].classList.add('visible');
    cells[i].querySelector('.word').innerText = words[i] || '';
    cells[i].querySelector('.gematria').innerText = words[i] ? computeAbjad(words[i]) : '';
    updateExtras(i);
    updateStatus();
  }
}
function hideIndex(i){
  if(i<0||i>=TOTAL) return;
  if(revealed[i]){
    revealed[i] = false;
    cells[i].classList.remove('visible'); cells[i].classList.add('hidden');
    updateStatus();
  }
}
function revealNext(){
  if(currentIndex >= TOTAL) return;
  revealIndex(currentIndex);
  currentIndex++;
}
function revealPrev(){
  if(currentIndex <= 0) return;
  currentIndex--;
  hideIndex(currentIndex);
}

/* ---------- ØªÙØ§Ø¹Ù„Ø§Øª Ø§Ù„ÙØ£Ø±Ø© ÙˆØ§Ù„Ù†Ù‚Ø± ---------- */
let lastRevealTime = 0, throttle = 80;
function onCellHover(e){
  if(modeSelect.value !== 'hover') return;
  const now = Date.now();
  if(now - lastRevealTime < throttle) return;
  lastRevealTime = now;
  revealNext();
}
function onCellClick(e){
  if(modeSelect.value !== 'click') return;
  const idx = Number(this.dataset ? this.dataset.index : e.currentTarget.dataset.index);
  revealIndex(idx);
  if(idx >= currentIndex) currentIndex = idx + 1;
}

/* ---------- Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø²Ù„ Ø§Ù„Ù‚Ù…Ø±ÙŠ ÙˆØ§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ ---------- */
function onCellDoubleClick(e) {
  const idx = Number(this.dataset.index);
  const houseIndex = parseInt(this.dataset.house);
  
  // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†Ø²Ù„ ÙÙŠ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  const info = housesInfo[houseIndex];
  const letter = arabicLetters[houseIndex];
  const zodiacIndex = houseIndex % 12;
  const zodiac = zodiacSigns[zodiacIndex];
  const elementClass = elementColors[zodiac.element];
  const gematria = abjadMap[letter] || (houseIndex + 1);
  houseCycleCount = Math.floor(houseIndex / 28) + 1;

  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù‚Ù…Ø±ÙŠ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ù€ 28 Ù…Ù†Ø²Ù„Ø©
  const mansion = MOON_MANSIONS[houseIndex];
  
  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ
  const seal = mansion.seal || {};

  modalHouseName.textContent = `${houseIndex + 1}. ${info.name}`;
  modalHouseNumber.textContent = houseIndex + 1;
  modalHouseLetter.textContent = letter;
  modalHouseZodiac.innerHTML = `${zodiac.name} (${zodiacIndex + 1}) - <span class="${elementClass}">${zodiac.element}</span>`;
  modalHouseGematria.textContent = gematria;
  modalHouseCycle.textContent = houseCycleCount;
  modalHouseEnergy.textContent = info.energy;
  modalHouseInfluence.textContent = info.influence;
  modalHouseBenefits.textContent = info.benefits;
  modalHouseChallenges.textContent = info.challenges;

  // Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù‚Ù…Ø±ÙŠ (Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø²Ù„Ø©ØŒ Ø§Ù„Ø­Ø±Ù Ø§Ù„ÙƒÙˆÙ†ÙŠØŒ Ø§Ù„Ø²Ø§ÙˆÙŠØ©ØŒ Ø§Ù„Ø¯Ù„Ø§Ù„Ø©)
  modalMansionName.textContent = mansion.name;
  modalMansionLetter.textContent = mansion.letter;
  modalMansionAngle.textContent = `${mansion.angle.toFixed ? mansion.angle.toFixed(2) : mansion.angle}Â°`;
  modalMansionMeaning.textContent = mansion.meaning;
  
  // Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø®Ø§ØªÙ… Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠ
  modalSealWar.textContent = seal.war || "â€”";
  modalSealTalisman.textContent = seal.talisman || "â€”";
  modalSealLetterPower.textContent = seal.letterPower || "â€”";
  modalSealArabicNames.textContent = seal.arabicNames || "â€”";
  modalSealSyriacNames.textContent = seal.syriacNames || "â€”";
  modalSealDays.textContent = seal.days || "â€”";
  modalSealStars.textContent = seal.stars || "â€”";
  modalSealAdhesives.textContent = seal.adhesives || "â€”";
  modalSealEarthlyHelpers.textContent = seal.earthlyHelpers || "â€”";
  modalSealHeavenlyKings.textContent = seal.heavenlyKings || "â€”";
  
  // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
  houseModal.style.display = "flex";
}

/* ---------- ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Øµ ÙˆØªÙ‚Ø³ÙŠÙ… Ø§Ù„ÙƒÙ„Ù…Ø§Øª ---------- */
function loadWordsFromField(){
  const raw = textInput.value.trim();
  const arr = splitToWords(raw);
  for(let i=0;i<TOTAL;i++){
    words[i] = arr[i] || '';
    revealed[i] = false;
  }
  currentIndex = 0;
  for(let i=0;i<TOTAL;i++){
    cells[i].querySelector('.word').innerText = words[i] || '';
    cells[i].querySelector('.gematria').innerText = words[i] ? computeAbjad(words[i]) : '';
    updateExtras(i);
  }
  applyChessColors();
  updateStatus();
}

/* ---------- Ø£Ø²Ø±Ø§Ø± / Ù…ÙØ§ØªÙŠØ­ ---------- */
document.getElementById('btnLoadFromInput').addEventListener('click', loadWordsFromField);
document.getElementById('btnFillDemo').addEventListener('click', ()=>{
  const sample = Array.from({length:64}, (_,i)=>'ÙƒÙ„Ù…Ø©'+(i+1)).join(' ');
  textInput.value = sample;
  loadWordsFromField();
});
document.getElementById('btnRandom').addEventListener('click', randomColoring);
document.getElementById('btnSpectrum').addEventListener('click', rainbowColoring);
document.getElementById('btnReset').addEventListener('click', ()=>{
  words = Array.from({length:TOTAL}, ()=>'');
  assignedClass = new Array(TOTAL).fill(null);
  revealed = new Array(TOTAL).fill(false);
  currentIndex = 0;
  for(let i=0;i<TOTAL;i++){
    cells[i].className = 'cell hidden';
    cells[i].querySelector('.word').innerText = '';
    cells[i].querySelector('.gematria').innerText = '';
    updateExtras(i);
  }
  applyChessColors();
  updateStatus();
});
document.getElementById('btnNext').addEventListener('click', revealNext);
document.getElementById('btnPrev').addEventListener('click', revealPrev);
document.getElementById('btnSubmit').addEventListener('click', ()=>{
  const done = revealed.filter(Boolean).length === TOTAL;
  if(!done){
    alert('Ù„Ù… ØªÙƒØªØ´Ù ÙƒÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø¨Ø¹Ø¯. Ø§ÙƒÙ…Ù„ Ø£Ùˆ Ø§Ø¶ØºØ· Ø§Ù„ØªØ§Ù„ÙŠ Ø­ØªÙ‰ ØªÙƒØªÙ…Ù„ 64.');
    return;
  }
  const w = window.open('','_blank');
  const list = words.map((wrd,i)=>`<li>${i+1}. ${escapeHtml(wrd || '')} â€” ${computeAbjad(wrd || '')}</li>`).join('');
  w.document.write(`<html dir="rtl" lang="ar"><head><meta charset="utf-8"><title>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù„ÙˆØ­Ø©</title>
    <style>body{font-family:Tahoma,Arial;color:#000;background:#fff;padding:18px}</style></head><body>
    <h2 style="text-align:center">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒÙ„Ù…Ø§Øª ÙˆÙ‚ÙŠÙ… Ø§Ù„Ø¬ÙÙ…Ù‘Ù„ Ø§Ù„ÙƒØ¨ÙŠØ±</h2><ol>${list}</ol></body></html>`);
  w.document.close();
});
document.getElementById('btnLoad').addEventListener('click', loadWordsFromField);

/* ---------- Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ ÙˆØ§Ù„Ø£Ø³Ù‡Ù… Ù„Ù„ØªÙƒØ¨ÙŠØ± ÙˆØ§Ù„ØªØµØºÙŠØ± ---------- */
let isDragging = false;
let startX, startY, startTransformX = 0, startTransformY = 0;

gridEl.addEventListener('mousedown', (e) => {
  if (e.button !== 0) return; // Only left click
  isDragging = true;
  startX = e.clientX;
  startY = e.clientY;
  const transform = window.getComputedStyle(gridEl).transform;
  if (transform !== 'none') {
    const values = transform.split('(')[1].split(')')[0].split(',');
    startTransformX = parseFloat(values[4]);
    startTransformY = parseFloat(values[5]);
  }
});

document.addEventListener('mousemove', (e) => {
  if (!isDragging) return;
  const dx = e.clientX - startX;
  const dy = e.clientY - startY;
  gridEl.style.transform = `translate(${startTransformX + dx}px, ${startTransformY + dy}px)`;
});

document.addEventListener('mouseup', () => {
  isDragging = false;
});

document.addEventListener('mouseleave', () => {
  isDragging = false;
});

function changeCellSize(delta) {
  let current = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--cell-size'));
  let next = Math.min(2500, Math.max(40, current + delta));
  document.documentElement.style.setProperty('--cell-size', next + 'px');
  sizeRange.value = next;
  sizeValue.innerText = next + 'px';
}

gridEl.addEventListener('wheel', (e) => {
  e.preventDefault();
  let step = e.deltaY < 0 ? 5 : -5; // Zoom in when scrolling up
  changeCellSize(step);
}, { passive: false });

document.addEventListener('keydown', (e) => {
  if (e.key === 'ArrowRight') {
    changeCellSize(5);
  } else if (e.key === 'ArrowDown') {
    changeCellSize(-5);
  }
});

/* ---------- ØªØºÙŠÙŠØ± Ø­Ø¬Ù… Ø§Ù„Ø®Ø§Ù†Ø© Ø¹Ø¨Ø± Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ---------- */
sizeRange.addEventListener('input', (e)=>{
  const v = e.target.value;
  document.documentElement.style.setProperty('--cell-size', v + 'px');
  sizeValue.innerText = v + 'px';
});

/* ---------- Ù…Ø³Ø§Ø¹Ø¯Ø© ---------- */
function updateStatus(){
  revealedCountEl.innerText = revealed.filter(Boolean).length;
  currentWordEl.innerText = words[Math.min(currentIndex, TOTAL-1)] || 'â€”';
}
function escapeHtml(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

/* ---------- Ø¹Ø±Ø¶ Ø§Ø³Ø·ÙˆØ±Ø© Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø·ÙŠÙ ---------- */
function renderRainbowLegend(){
  rainbowLegend.innerHTML = rainbow.map(r=>`<div style="display:flex; gap:6px; align-items:center; margin-bottom:4px;">
    <div style="width:18px;height:12px;background:${r.color};border-radius:3px"></div>
    <div style="font-size:13px;color:#fff">${r.name} â€” <span style="color:var(--muted)">${r.meaning}</span></div>
  </div>`).join('');
}

/* ---------- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù‚Ù…Ø±ÙŠ (Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø«Ø§Ù†ÙŠ) ---------- */
function calculateMoonPosition(days) {
  const cycle = 28;
  const anglePerDay = 360 / cycle;
  return (days * anglePerDay) % 360;
}

function generateMessage() {
  const dateVal = dateInput.value;
  if (!dateVal){ alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ø±ÙŠØ®"); return; }
  
  const startDate = new Date("2024-04-07");
  const selectedDate = new Date(dateVal);
  const daysDiff = Math.floor((selectedDate - startDate) / 86400000);
  const currentDay = (daysDiff % 28 + 28) % 28;

  const moonData = MOON_MANSIONS[currentDay];
  const output = `
    <div style="padding:8px; background:#0e1a24; border:1px solid #173142; border-radius:8px">
      <div style="font-weight:800; color:#f5d08a; margin-bottom:6px">Ù…Ù†Ø²Ù„Ø© Ø§Ù„ÙŠÙˆÙ…: ${moonData.name}</div>
      <div>Ø§Ù„Ø­Ø±Ù Ø§Ù„ÙƒÙˆÙ†ÙŠ: ${moonData.letter}</div>
      <div>Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù‚Ù…Ø±ÙŠØ©: ${moonData.angle.toFixed(2)}Â°</div>
      <div>Ø§Ù„Ø¯Ù„Ø§Ù„Ø©: ${moonData.meaning}</div>
    </div>
  `;
  outputEl.innerHTML = output;

  // ØªÙˆÙ„ÙŠØ¯ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„
  let tableHTML = "";
  for(let day = 0; day < 28; day++) {
    const angle = calculateMoonPosition(day);
    tableHTML += `
      <tr>
        <td>${day + 1}</td>
        <td>${MOON_MANSIONS[day].name}</td>
        <td>${MOON_MANSIONS[day].letter}</td>
        <td>${angle.toFixed(2)}Â°</td>
        <td>${MOON_MANSIONS[day].meaning}</td>
      </tr>
    `;
  }
  mansionBody.innerHTML = tableHTML;

  // ØªÙˆÙ„ÙŠØ¯ Ø¬Ø¯ÙˆÙ„ Ø£Ø¨ÙˆÙ…Ø¹Ø´Ø±
  abumasharBody.innerHTML = ABU_MASHAR_TABLE
    .map(item => `
      <tr>
        <td>${item.name}</td>
        <td>${item.degree}Â°</td>
        <td>${item.secret}</td>
        <td>${item.property}</td>
      </tr>
    `).join("");
}

function toggleTables() {
  mainTable.classList.toggle("active");
  abumasharTable.classList.toggle("active");
}

/* ---------- ØªÙ‡ÙŠØ¦Ø© Ø£ÙˆÙ„ÙŠØ© ---------- */
(function init(){
  buildGrid();
  sizeValue.innerText = sizeRange.value + 'px';
  renderRainbowLegend();
  
  // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
  closeHouseModal.addEventListener('click', () => {
    houseModal.style.display = "none";
  });
  
  // Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø§Ø²Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
  window.addEventListener('click', (e) => {
    if (e.target === houseModal) {
      houseModal.style.display = "none";
    }
  });

  // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙˆÙ„Ø¯ Ø§Ù„Ù‚Ù…Ø±ÙŠ
  btnAnalyze.addEventListener('click', generateMessage);
  btnToggleTables.addEventListener('click', toggleTables);

  // ØªÙˆÙ„ÙŠØ¯ Ø£ÙˆÙ„ÙŠ Ù„Ù„Ø¬Ø¯Ø§ÙˆÙ„ ÙˆØ§Ù„Ù…Ø®Ø±Ø¬Ø§Øª ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø«Ø§Ù†ÙŠ
  generateMessage();
})();
</script>

</body>
</html>